var xr=Object.defineProperty;var Lr=(e,t,n)=>t in e?xr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var J=(e,t,n)=>(Lr(e,typeof t!="symbol"?t+"":t,n),n);import{c as q,g as Or}from"./index-ecca18a0.js";function Ht(e,t){return function(){return e.apply(t,arguments)}}const{toString:kr}=Object.prototype,{getPrototypeOf:vt}=Object,$e=(e=>t=>{const n=kr.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),ve=e=>(e=e.toLowerCase(),t=>$e(t)===e),Xe=e=>t=>typeof t===e,{isArray:ke}=Array,Ue=Xe("undefined");function Dr(e){return e!==null&&!Ue(e)&&e.constructor!==null&&!Ue(e.constructor)&&ue(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const qt=ve("ArrayBuffer");function Mr(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&qt(e.buffer),t}const Br=Xe("string"),ue=Xe("function"),Vt=Xe("number"),Ye=e=>e!==null&&typeof e=="object",Ur=e=>e===!0||e===!1,qe=e=>{if($e(e)!=="object")return!1;const t=vt(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Fr=ve("Date"),Pr=ve("File"),Nr=ve("Blob"),Ir=ve("FileList"),jr=e=>Ye(e)&&ue(e.pipe),_r=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||ue(e.append)&&((t=$e(e))==="formdata"||t==="object"&&ue(e.toString)&&e.toString()==="[object FormData]"))},zr=ve("URLSearchParams"),Wr=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Fe(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let i,o;if(typeof e!="object"&&(e=[e]),ke(e))for(i=0,o=e.length;i<o;i++)t.call(null,e[i],i,e);else{const d=n?Object.getOwnPropertyNames(e):Object.keys(e),s=d.length;let y;for(i=0;i<s;i++)y=d[i],t.call(null,e[y],y,e)}}function Gt(e,t){t=t.toLowerCase();const n=Object.keys(e);let i=n.length,o;for(;i-- >0;)if(o=n[i],t===o.toLowerCase())return o;return null}const Jt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),Kt=e=>!Ue(e)&&e!==Jt;function ct(){const{caseless:e}=Kt(this)&&this||{},t={},n=(i,o)=>{const d=e&&Gt(t,o)||o;qe(t[d])&&qe(i)?t[d]=ct(t[d],i):qe(i)?t[d]=ct({},i):ke(i)?t[d]=i.slice():t[d]=i};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Fe(arguments[i],n);return t}const Hr=(e,t,n,{allOwnKeys:i}={})=>(Fe(t,(o,d)=>{n&&ue(o)?e[d]=Ht(o,n):e[d]=o},{allOwnKeys:i}),e),qr=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Vr=(e,t,n,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Gr=(e,t,n,i)=>{let o,d,s;const y={};if(t=t||{},e==null)return t;do{for(o=Object.getOwnPropertyNames(e),d=o.length;d-- >0;)s=o[d],(!i||i(s,e,t))&&!y[s]&&(t[s]=e[s],y[s]=!0);e=n!==!1&&vt(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Jr=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const i=e.indexOf(t,n);return i!==-1&&i===n},Kr=e=>{if(!e)return null;if(ke(e))return e;let t=e.length;if(!Vt(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},$r=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&vt(Uint8Array)),Xr=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let o;for(;(o=i.next())&&!o.done;){const d=o.value;t.call(e,d[0],d[1])}},Yr=(e,t)=>{let n;const i=[];for(;(n=e.exec(t))!==null;)i.push(n);return i},Qr=ve("HTMLFormElement"),Zr=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,o){return i.toUpperCase()+o}),Lt=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),en=ve("RegExp"),$t=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),i={};Fe(n,(o,d)=>{let s;(s=t(o,d,e))!==!1&&(i[d]=s||o)}),Object.defineProperties(e,i)},tn=e=>{$t(e,(t,n)=>{if(ue(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=e[n];if(ue(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},rn=(e,t)=>{const n={},i=o=>{o.forEach(d=>{n[d]=!0})};return ke(e)?i(e):i(String(e).split(t)),n},nn=()=>{},on=(e,t)=>(e=+e,Number.isFinite(e)?e:t),at="abcdefghijklmnopqrstuvwxyz",Ot="0123456789",Xt={DIGIT:Ot,ALPHA:at,ALPHA_DIGIT:at+at.toUpperCase()+Ot},sn=(e=16,t=Xt.ALPHA_DIGIT)=>{let n="";const{length:i}=t;for(;e--;)n+=t[Math.random()*i|0];return n};function an(e){return!!(e&&ue(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const un=e=>{const t=new Array(10),n=(i,o)=>{if(Ye(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[o]=i;const d=ke(i)?[]:{};return Fe(i,(s,y)=>{const D=n(s,o+1);!Ue(D)&&(d[y]=D)}),t[o]=void 0,d}}return i};return n(e,0)},dn=ve("AsyncFunction"),fn=e=>e&&(Ye(e)||ue(e))&&ue(e.then)&&ue(e.catch),v={isArray:ke,isArrayBuffer:qt,isBuffer:Dr,isFormData:_r,isArrayBufferView:Mr,isString:Br,isNumber:Vt,isBoolean:Ur,isObject:Ye,isPlainObject:qe,isUndefined:Ue,isDate:Fr,isFile:Pr,isBlob:Nr,isRegExp:en,isFunction:ue,isStream:jr,isURLSearchParams:zr,isTypedArray:$r,isFileList:Ir,forEach:Fe,merge:ct,extend:Hr,trim:Wr,stripBOM:qr,inherits:Vr,toFlatObject:Gr,kindOf:$e,kindOfTest:ve,endsWith:Jr,toArray:Kr,forEachEntry:Xr,matchAll:Yr,isHTMLForm:Qr,hasOwnProperty:Lt,hasOwnProp:Lt,reduceDescriptors:$t,freezeMethods:tn,toObjectSet:rn,toCamelCase:Zr,noop:nn,toFiniteNumber:on,findKey:Gt,global:Jt,isContextDefined:Kt,ALPHABET:Xt,generateString:sn,isSpecCompliantForm:an,toJSONObject:un,isAsyncFn:dn,isThenable:fn};function _(e,t,n,i,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),i&&(this.request=i),o&&(this.response=o)}v.inherits(_,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:v.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Yt=_.prototype,Qt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Qt[e]={value:e}});Object.defineProperties(_,Qt);Object.defineProperty(Yt,"isAxiosError",{value:!0});_.from=(e,t,n,i,o,d)=>{const s=Object.create(Yt);return v.toFlatObject(e,s,function(D){return D!==Error.prototype},y=>y!=="isAxiosError"),_.call(s,e.message,t,n,i,o),s.cause=e,s.name=e.name,d&&Object.assign(s,d),s};const cn=null;function lt(e){return v.isPlainObject(e)||v.isArray(e)}function Zt(e){return v.endsWith(e,"[]")?e.slice(0,-2):e}function kt(e,t,n){return e?e.concat(t).map(function(o,d){return o=Zt(o),!n&&d?"["+o+"]":o}).join(n?".":""):t}function ln(e){return v.isArray(e)&&!e.some(lt)}const hn=v.toFlatObject(v,{},null,function(t){return/^is[A-Z]/.test(t)});function Qe(e,t,n){if(!v.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=v.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,W){return!v.isUndefined(W[F])});const i=n.metaTokens,o=n.visitor||E,d=n.dots,s=n.indexes,D=(n.Blob||typeof Blob<"u"&&Blob)&&v.isSpecCompliantForm(t);if(!v.isFunction(o))throw new TypeError("visitor must be a function");function P(M){if(M===null)return"";if(v.isDate(M))return M.toISOString();if(!D&&v.isBlob(M))throw new _("Blob is not supported. Use a Buffer instead.");return v.isArrayBuffer(M)||v.isTypedArray(M)?D&&typeof Blob=="function"?new Blob([M]):Buffer.from(M):M}function E(M,F,W){let $=M;if(M&&!W&&typeof M=="object"){if(v.endsWith(F,"{}"))F=i?F:F.slice(0,-2),M=JSON.stringify(M);else if(v.isArray(M)&&ln(M)||(v.isFileList(M)||v.endsWith(F,"[]"))&&($=v.toArray(M)))return F=Zt(F),$.forEach(function(fe,G){!(v.isUndefined(fe)||fe===null)&&t.append(s===!0?kt([F],G,d):s===null?F:F+"[]",P(fe))}),!1}return lt(M)?!0:(t.append(kt(W,F,d),P(M)),!1)}const S=[],V=Object.assign(hn,{defaultVisitor:E,convertValue:P,isVisitable:lt});function ee(M,F){if(!v.isUndefined(M)){if(S.indexOf(M)!==-1)throw Error("Circular reference detected in "+F.join("."));S.push(M),v.forEach(M,function($,de){(!(v.isUndefined($)||$===null)&&o.call(t,$,v.isString(de)?de.trim():de,F,V))===!0&&ee($,F?F.concat(de):[de])}),S.pop()}}if(!v.isObject(e))throw new TypeError("data must be an object");return ee(e),t}function Dt(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function bt(e,t){this._pairs=[],e&&Qe(e,this,t)}const er=bt.prototype;er.append=function(t,n){this._pairs.push([t,n])};er.toString=function(t){const n=t?function(i){return t.call(this,i,Dt)}:Dt;return this._pairs.map(function(o){return n(o[0])+"="+n(o[1])},"").join("&")};function pn(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function tr(e,t,n){if(!t)return e;const i=n&&n.encode||pn,o=n&&n.serialize;let d;if(o?d=o(t,n):d=v.isURLSearchParams(t)?t.toString():new bt(t,n).toString(i),d){const s=e.indexOf("#");s!==-1&&(e=e.slice(0,s)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class mn{constructor(){this.handlers=[]}use(t,n,i){return this.handlers.push({fulfilled:t,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){v.forEach(this.handlers,function(i){i!==null&&t(i)})}}const Mt=mn,rr={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},vn=typeof URLSearchParams<"u"?URLSearchParams:bt,bn=typeof FormData<"u"?FormData:null,yn=typeof Blob<"u"?Blob:null,wn={isBrowser:!0,classes:{URLSearchParams:vn,FormData:bn,Blob:yn},protocols:["http","https","file","blob","url","data"]},nr=typeof window<"u"&&typeof document<"u",gn=(e=>nr&&["ReactNative","NativeScript","NS"].indexOf(e)<0)(typeof navigator<"u"&&navigator.product),Rn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Sn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nr,hasStandardBrowserEnv:gn,hasStandardBrowserWebWorkerEnv:Rn},Symbol.toStringTag,{value:"Module"})),me={...Sn,...wn};function Tn(e,t){return Qe(e,new me.classes.URLSearchParams,Object.assign({visitor:function(n,i,o,d){return me.isNode&&v.isBuffer(n)?(this.append(i,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},t))}function Cn(e){return v.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function An(e){const t={},n=Object.keys(e);let i;const o=n.length;let d;for(i=0;i<o;i++)d=n[i],t[d]=e[d];return t}function ir(e){function t(n,i,o,d){let s=n[d++];const y=Number.isFinite(+s),D=d>=n.length;return s=!s&&v.isArray(o)?o.length:s,D?(v.hasOwnProp(o,s)?o[s]=[o[s],i]:o[s]=i,!y):((!o[s]||!v.isObject(o[s]))&&(o[s]=[]),t(n,i,o[s],d)&&v.isArray(o[s])&&(o[s]=An(o[s])),!y)}if(v.isFormData(e)&&v.isFunction(e.entries)){const n={};return v.forEachEntry(e,(i,o)=>{t(Cn(i),o,n,0)}),n}return null}function En(e,t,n){if(v.isString(e))try{return(t||JSON.parse)(e),v.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(e)}const yt={transitional:rr,adapter:["xhr","http"],transformRequest:[function(t,n){const i=n.getContentType()||"",o=i.indexOf("application/json")>-1,d=v.isObject(t);if(d&&v.isHTMLForm(t)&&(t=new FormData(t)),v.isFormData(t))return o&&o?JSON.stringify(ir(t)):t;if(v.isArrayBuffer(t)||v.isBuffer(t)||v.isStream(t)||v.isFile(t)||v.isBlob(t))return t;if(v.isArrayBufferView(t))return t.buffer;if(v.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let y;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Tn(t,this.formSerializer).toString();if((y=v.isFileList(t))||i.indexOf("multipart/form-data")>-1){const D=this.env&&this.env.FormData;return Qe(y?{"files[]":t}:t,D&&new D,this.formSerializer)}}return d||o?(n.setContentType("application/json",!1),En(t)):t}],transformResponse:[function(t){const n=this.transitional||yt.transitional,i=n&&n.forcedJSONParsing,o=this.responseType==="json";if(t&&v.isString(t)&&(i&&!this.responseType||o)){const s=!(n&&n.silentJSONParsing)&&o;try{return JSON.parse(t)}catch(y){if(s)throw y.name==="SyntaxError"?_.from(y,_.ERR_BAD_RESPONSE,this,null,this.response):y}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:me.classes.FormData,Blob:me.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};v.forEach(["delete","get","head","post","put","patch"],e=>{yt.headers[e]={}});const wt=yt,xn=v.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ln=e=>{const t={};let n,i,o;return e&&e.split(`
`).forEach(function(s){o=s.indexOf(":"),n=s.substring(0,o).trim().toLowerCase(),i=s.substring(o+1).trim(),!(!n||t[n]&&xn[n])&&(n==="set-cookie"?t[n]?t[n].push(i):t[n]=[i]:t[n]=t[n]?t[n]+", "+i:i)}),t},Bt=Symbol("internals");function Me(e){return e&&String(e).trim().toLowerCase()}function Ve(e){return e===!1||e==null?e:v.isArray(e)?e.map(Ve):String(e)}function On(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(e);)t[i[1]]=i[2];return t}const kn=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function ut(e,t,n,i,o){if(v.isFunction(i))return i.call(this,t,n);if(o&&(t=n),!!v.isString(t)){if(v.isString(i))return t.indexOf(i)!==-1;if(v.isRegExp(i))return i.test(t)}}function Dn(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,i)=>n.toUpperCase()+i)}function Mn(e,t){const n=v.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+n,{value:function(o,d,s){return this[i].call(this,t,o,d,s)},configurable:!0})})}class Ze{constructor(t){t&&this.set(t)}set(t,n,i){const o=this;function d(y,D,P){const E=Me(D);if(!E)throw new Error("header name must be a non-empty string");const S=v.findKey(o,E);(!S||o[S]===void 0||P===!0||P===void 0&&o[S]!==!1)&&(o[S||D]=Ve(y))}const s=(y,D)=>v.forEach(y,(P,E)=>d(P,E,D));return v.isPlainObject(t)||t instanceof this.constructor?s(t,n):v.isString(t)&&(t=t.trim())&&!kn(t)?s(Ln(t),n):t!=null&&d(n,t,i),this}get(t,n){if(t=Me(t),t){const i=v.findKey(this,t);if(i){const o=this[i];if(!n)return o;if(n===!0)return On(o);if(v.isFunction(n))return n.call(this,o,i);if(v.isRegExp(n))return n.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=Me(t),t){const i=v.findKey(this,t);return!!(i&&this[i]!==void 0&&(!n||ut(this,this[i],i,n)))}return!1}delete(t,n){const i=this;let o=!1;function d(s){if(s=Me(s),s){const y=v.findKey(i,s);y&&(!n||ut(i,i[y],y,n))&&(delete i[y],o=!0)}}return v.isArray(t)?t.forEach(d):d(t),o}clear(t){const n=Object.keys(this);let i=n.length,o=!1;for(;i--;){const d=n[i];(!t||ut(this,this[d],d,t,!0))&&(delete this[d],o=!0)}return o}normalize(t){const n=this,i={};return v.forEach(this,(o,d)=>{const s=v.findKey(i,d);if(s){n[s]=Ve(o),delete n[d];return}const y=t?Dn(d):String(d).trim();y!==d&&delete n[d],n[y]=Ve(o),i[y]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return v.forEach(this,(i,o)=>{i!=null&&i!==!1&&(n[o]=t&&v.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const i=new this(t);return n.forEach(o=>i.set(o)),i}static accessor(t){const i=(this[Bt]=this[Bt]={accessors:{}}).accessors,o=this.prototype;function d(s){const y=Me(s);i[y]||(Mn(o,s),i[y]=!0)}return v.isArray(t)?t.forEach(d):d(t),this}}Ze.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);v.reduceDescriptors(Ze.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(i){this[n]=i}}});v.freezeMethods(Ze);const we=Ze;function dt(e,t){const n=this||wt,i=t||n,o=we.from(i.headers);let d=i.data;return v.forEach(e,function(y){d=y.call(n,d,o.normalize(),t?t.status:void 0)}),o.normalize(),d}function or(e){return!!(e&&e.__CANCEL__)}function Pe(e,t,n){_.call(this,e??"canceled",_.ERR_CANCELED,t,n),this.name="CanceledError"}v.inherits(Pe,_,{__CANCEL__:!0});function Bn(e,t,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?e(n):t(new _("Request failed with status code "+n.status,[_.ERR_BAD_REQUEST,_.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Un=me.hasStandardBrowserEnv?{write(e,t,n,i,o,d){const s=[e+"="+encodeURIComponent(t)];v.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),v.isString(i)&&s.push("path="+i),v.isString(o)&&s.push("domain="+o),d===!0&&s.push("secure"),document.cookie=s.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Fn(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function Pn(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function sr(e,t){return e&&!Fn(t)?Pn(e,t):t}const Nn=me.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function o(d){let s=d;return t&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=o(window.location.href),function(s){const y=v.isString(s)?o(s):s;return y.protocol===i.protocol&&y.host===i.host}}():function(){return function(){return!0}}();function In(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function jn(e,t){e=e||10;const n=new Array(e),i=new Array(e);let o=0,d=0,s;return t=t!==void 0?t:1e3,function(D){const P=Date.now(),E=i[d];s||(s=P),n[o]=D,i[o]=P;let S=d,V=0;for(;S!==o;)V+=n[S++],S=S%e;if(o=(o+1)%e,o===d&&(d=(d+1)%e),P-s<t)return;const ee=E&&P-E;return ee?Math.round(V*1e3/ee):void 0}}function Ut(e,t){let n=0;const i=jn(50,250);return o=>{const d=o.loaded,s=o.lengthComputable?o.total:void 0,y=d-n,D=i(y),P=d<=s;n=d;const E={loaded:d,total:s,progress:s?d/s:void 0,bytes:y,rate:D||void 0,estimated:D&&s&&P?(s-d)/D:void 0,event:o};E[t?"download":"upload"]=!0,e(E)}}const _n=typeof XMLHttpRequest<"u",zn=_n&&function(e){return new Promise(function(n,i){let o=e.data;const d=we.from(e.headers).normalize();let{responseType:s,withXSRFToken:y}=e,D;function P(){e.cancelToken&&e.cancelToken.unsubscribe(D),e.signal&&e.signal.removeEventListener("abort",D)}let E;if(v.isFormData(o)){if(me.hasStandardBrowserEnv||me.hasStandardBrowserWebWorkerEnv)d.setContentType(!1);else if((E=d.getContentType())!==!1){const[F,...W]=E?E.split(";").map($=>$.trim()).filter(Boolean):[];d.setContentType([F||"multipart/form-data",...W].join("; "))}}let S=new XMLHttpRequest;if(e.auth){const F=e.auth.username||"",W=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";d.set("Authorization","Basic "+btoa(F+":"+W))}const V=sr(e.baseURL,e.url);S.open(e.method.toUpperCase(),tr(V,e.params,e.paramsSerializer),!0),S.timeout=e.timeout;function ee(){if(!S)return;const F=we.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),$={data:!s||s==="text"||s==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:F,config:e,request:S};Bn(function(fe){n(fe),P()},function(fe){i(fe),P()},$),S=null}if("onloadend"in S?S.onloadend=ee:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(ee)},S.onabort=function(){S&&(i(new _("Request aborted",_.ECONNABORTED,e,S)),S=null)},S.onerror=function(){i(new _("Network Error",_.ERR_NETWORK,e,S)),S=null},S.ontimeout=function(){let W=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const $=e.transitional||rr;e.timeoutErrorMessage&&(W=e.timeoutErrorMessage),i(new _(W,$.clarifyTimeoutError?_.ETIMEDOUT:_.ECONNABORTED,e,S)),S=null},me.hasStandardBrowserEnv&&(y&&v.isFunction(y)&&(y=y(e)),y||y!==!1&&Nn(V))){const F=e.xsrfHeaderName&&e.xsrfCookieName&&Un.read(e.xsrfCookieName);F&&d.set(e.xsrfHeaderName,F)}o===void 0&&d.setContentType(null),"setRequestHeader"in S&&v.forEach(d.toJSON(),function(W,$){S.setRequestHeader($,W)}),v.isUndefined(e.withCredentials)||(S.withCredentials=!!e.withCredentials),s&&s!=="json"&&(S.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&S.addEventListener("progress",Ut(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",Ut(e.onUploadProgress)),(e.cancelToken||e.signal)&&(D=F=>{S&&(i(!F||F.type?new Pe(null,e,S):F),S.abort(),S=null)},e.cancelToken&&e.cancelToken.subscribe(D),e.signal&&(e.signal.aborted?D():e.signal.addEventListener("abort",D)));const M=In(V);if(M&&me.protocols.indexOf(M)===-1){i(new _("Unsupported protocol "+M+":",_.ERR_BAD_REQUEST,e));return}S.send(o||null)})},ht={http:cn,xhr:zn};v.forEach(ht,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ft=e=>`- ${e}`,Wn=e=>v.isFunction(e)||e===null||e===!1,ar={getAdapter:e=>{e=v.isArray(e)?e:[e];const{length:t}=e;let n,i;const o={};for(let d=0;d<t;d++){n=e[d];let s;if(i=n,!Wn(n)&&(i=ht[(s=String(n)).toLowerCase()],i===void 0))throw new _(`Unknown adapter '${s}'`);if(i)break;o[s||"#"+d]=i}if(!i){const d=Object.entries(o).map(([y,D])=>`adapter ${y} `+(D===!1?"is not supported by the environment":"is not available in the build"));let s=t?d.length>1?`since :
`+d.map(Ft).join(`
`):" "+Ft(d[0]):"as no adapter specified";throw new _("There is no suitable adapter to dispatch the request "+s,"ERR_NOT_SUPPORT")}return i},adapters:ht};function ft(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Pe(null,e)}function Pt(e){return ft(e),e.headers=we.from(e.headers),e.data=dt.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),ar.getAdapter(e.adapter||wt.adapter)(e).then(function(i){return ft(e),i.data=dt.call(e,e.transformResponse,i),i.headers=we.from(i.headers),i},function(i){return or(i)||(ft(e),i&&i.response&&(i.response.data=dt.call(e,e.transformResponse,i.response),i.response.headers=we.from(i.response.headers))),Promise.reject(i)})}const Nt=e=>e instanceof we?e.toJSON():e;function Oe(e,t){t=t||{};const n={};function i(P,E,S){return v.isPlainObject(P)&&v.isPlainObject(E)?v.merge.call({caseless:S},P,E):v.isPlainObject(E)?v.merge({},E):v.isArray(E)?E.slice():E}function o(P,E,S){if(v.isUndefined(E)){if(!v.isUndefined(P))return i(void 0,P,S)}else return i(P,E,S)}function d(P,E){if(!v.isUndefined(E))return i(void 0,E)}function s(P,E){if(v.isUndefined(E)){if(!v.isUndefined(P))return i(void 0,P)}else return i(void 0,E)}function y(P,E,S){if(S in t)return i(P,E);if(S in e)return i(void 0,P)}const D={url:d,method:d,data:d,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,withXSRFToken:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:y,headers:(P,E)=>o(Nt(P),Nt(E),!0)};return v.forEach(Object.keys(Object.assign({},e,t)),function(E){const S=D[E]||o,V=S(e[E],t[E],E);v.isUndefined(V)&&S!==y||(n[E]=V)}),n}const ur="1.6.2",gt={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{gt[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const It={};gt.transitional=function(t,n,i){function o(d,s){return"[Axios v"+ur+"] Transitional option '"+d+"'"+s+(i?". "+i:"")}return(d,s,y)=>{if(t===!1)throw new _(o(s," has been removed"+(n?" in "+n:"")),_.ERR_DEPRECATED);return n&&!It[s]&&(It[s]=!0,console.warn(o(s," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(d,s,y):!0}};function Hn(e,t,n){if(typeof e!="object")throw new _("options must be an object",_.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let o=i.length;for(;o-- >0;){const d=i[o],s=t[d];if(s){const y=e[d],D=y===void 0||s(y,d,e);if(D!==!0)throw new _("option "+d+" must be "+D,_.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new _("Unknown option "+d,_.ERR_BAD_OPTION)}}const pt={assertOptions:Hn,validators:gt},Se=pt.validators;class Ke{constructor(t){this.defaults=t,this.interceptors={request:new Mt,response:new Mt}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Oe(this.defaults,n);const{transitional:i,paramsSerializer:o,headers:d}=n;i!==void 0&&pt.assertOptions(i,{silentJSONParsing:Se.transitional(Se.boolean),forcedJSONParsing:Se.transitional(Se.boolean),clarifyTimeoutError:Se.transitional(Se.boolean)},!1),o!=null&&(v.isFunction(o)?n.paramsSerializer={serialize:o}:pt.assertOptions(o,{encode:Se.function,serialize:Se.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s=d&&v.merge(d.common,d[n.method]);d&&v.forEach(["delete","get","head","post","put","patch","common"],M=>{delete d[M]}),n.headers=we.concat(s,d);const y=[];let D=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(n)===!1||(D=D&&F.synchronous,y.unshift(F.fulfilled,F.rejected))});const P=[];this.interceptors.response.forEach(function(F){P.push(F.fulfilled,F.rejected)});let E,S=0,V;if(!D){const M=[Pt.bind(this),void 0];for(M.unshift.apply(M,y),M.push.apply(M,P),V=M.length,E=Promise.resolve(n);S<V;)E=E.then(M[S++],M[S++]);return E}V=y.length;let ee=n;for(S=0;S<V;){const M=y[S++],F=y[S++];try{ee=M(ee)}catch(W){F.call(this,W);break}}try{E=Pt.call(this,ee)}catch(M){return Promise.reject(M)}for(S=0,V=P.length;S<V;)E=E.then(P[S++],P[S++]);return E}getUri(t){t=Oe(this.defaults,t);const n=sr(t.baseURL,t.url);return tr(n,t.params,t.paramsSerializer)}}v.forEach(["delete","get","head","options"],function(t){Ke.prototype[t]=function(n,i){return this.request(Oe(i||{},{method:t,url:n,data:(i||{}).data}))}});v.forEach(["post","put","patch"],function(t){function n(i){return function(d,s,y){return this.request(Oe(y||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:s}))}}Ke.prototype[t]=n(),Ke.prototype[t+"Form"]=n(!0)});const Ge=Ke;class Rt{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const i=this;this.promise.then(o=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](o);i._listeners=null}),this.promise.then=o=>{let d;const s=new Promise(y=>{i.subscribe(y),d=y}).then(o);return s.cancel=function(){i.unsubscribe(d)},s},t(function(d,s,y){i.reason||(i.reason=new Pe(d,s,y),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new Rt(function(o){t=o}),cancel:t}}}const qn=Rt;function Vn(e){return function(n){return e.apply(null,n)}}function Gn(e){return v.isObject(e)&&e.isAxiosError===!0}const mt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(mt).forEach(([e,t])=>{mt[t]=e});const Jn=mt;function dr(e){const t=new Ge(e),n=Ht(Ge.prototype.request,t);return v.extend(n,Ge.prototype,t,{allOwnKeys:!0}),v.extend(n,t,null,{allOwnKeys:!0}),n.create=function(o){return dr(Oe(e,o))},n}const K=dr(wt);K.Axios=Ge;K.CanceledError=Pe;K.CancelToken=qn;K.isCancel=or;K.VERSION=ur;K.toFormData=Qe;K.AxiosError=_;K.Cancel=K.CanceledError;K.all=function(t){return Promise.all(t)};K.spread=Vn;K.isAxiosError=Gn;K.mergeConfig=Oe;K.AxiosHeaders=we;K.formToJSON=e=>ir(v.isHTMLForm(e)?new FormData(e):e);K.getAdapter=ar.getAdapter;K.HttpStatusCode=Jn;K.default=K;const Kn=K;var fr={exports:{}};(function(e){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function t(u,r){if(!u)throw"First parameter is required.";r=r||{type:"video"},r=new n(u,r);var a=this;function h(l){return r.disableLogs||console.log("RecordRTC version: ",a.version),l&&(r=new n(u,l)),r.disableLogs||console.log("started recording "+r.type+" stream."),g?(g.clearRecordedData(),g.record(),L("recording"),a.recordingDuration&&R(),a):(m(function(){a.recordingDuration&&R()}),a)}function m(l){l&&(r.initCallback=function(){l(),l=r.initCallback=null});var A=new i(u,r);g=new A(u,r),g.record(),L("recording"),r.disableLogs||console.log("Initialized recorderType:",g.constructor.name,"for output-type:",r.type)}function p(l){if(l=l||function(){},!g){x();return}if(a.state==="paused"){a.resumeRecording(),setTimeout(function(){p(l)},1);return}a.state!=="recording"&&!r.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',a.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),r.type!=="gif"?g.stop(A):(g.stop(),A()),L("stopped");function A(N){if(!g){typeof l.call=="function"?l.call(a,""):l("");return}Object.keys(g).forEach(function(k){typeof g[k]!="function"&&(a[k]=g[k])});var c=g.blob;if(!c)if(N)g.blob=c=N;else throw"Recording failed.";if(c&&!r.disableLogs&&console.log(c.type,"->",$(c.size)),l){var b;try{b=E.createObjectURL(c)}catch{}typeof l.call=="function"?l.call(a,b):l(b)}r.autoWriteToDisk&&O(function(k){var B={};B[r.type+"Blob"]=k,ce.Store(B)})}}function w(){if(!g){x();return}if(a.state!=="recording"){r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",a.state);return}L("paused"),g.pause(),r.disableLogs||console.log("Paused recording.")}function f(){if(!g){x();return}if(a.state!=="paused"){r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",a.state);return}L("recording"),g.resume(),r.disableLogs||console.log("Resumed recording.")}function T(l){postMessage(new FileReaderSync().readAsDataURL(l))}function O(l,A){if(!l)throw"Pass a callback function over getDataURL.";var N=A?A.blob:(g||{}).blob;if(!N){r.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){O(l,A)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var c=k(T);c.onmessage=function(B){l(B.data)},c.postMessage(N)}else{var b=new FileReader;b.readAsDataURL(N),b.onload=function(B){l(B.target.result)}}function k(B){try{var z=E.createObjectURL(new Blob([B.toString(),"this.onmessage =  function (eee) {"+B.name+"(eee.data);}"],{type:"application/javascript"})),j=new Worker(z);return E.revokeObjectURL(z),j}catch{}}}function R(l){if(l=l||0,a.state==="paused"){setTimeout(function(){R(l)},1e3);return}if(a.state!=="stopped"){if(l>=a.recordingDuration){p(a.onRecordingStopped);return}l+=1e3,setTimeout(function(){R(l)},1e3)}}function L(l){a&&(a.state=l,typeof a.onStateChanged.call=="function"?a.onStateChanged.call(a,l):a.onStateChanged(l))}var C='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function x(){r.disableLogs!==!0&&console.warn(C)}var g,U={startRecording:h,stopRecording:p,pauseRecording:w,resumeRecording:f,initRecorder:m,setRecordingDuration:function(l,A){if(typeof l>"u")throw"recordingDuration is required.";if(typeof l!="number")throw"recordingDuration must be a number.";return a.recordingDuration=l,a.onRecordingStopped=A||function(){},{onRecordingStopped:function(N){a.onRecordingStopped=N}}},clearRecordedData:function(){if(!g){x();return}g.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!g){x();return}return g.blob},getDataURL:O,toURL:function(){if(!g){x();return}return E.createObjectURL(g.blob)},getInternalRecorder:function(){return g},save:function(l){if(!g){x();return}de(g.blob,l)},getFromDisk:function(l){if(!g){x();return}t.getFromDisk(r.type,l)},setAdvertisementArray:function(l){r.advertisement=[];for(var A=l.length,N=0;N<A;N++)r.advertisement.push({duration:N,image:l[N]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){a.state==="recording"&&!r.disableLogs&&console.warn("Stop an active recorder."),g&&typeof g.clearRecordedData=="function"&&g.clearRecordedData(),g=null,L("inactive"),a.blob=null},onStateChanged:function(l){r.disableLogs||console.log("Recorder state changed:",l)},state:"inactive",getState:function(){return a.state},destroy:function(){var l=r.disableLogs;r={disableLogs:!0},a.reset(),L("destroyed"),U=a=null,Ee.AudioContextConstructor&&(Ee.AudioContextConstructor.close(),Ee.AudioContextConstructor=null),r.disableLogs=l,r.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return a=U,U;for(var I in U)this[I]=U[I];return a=this,U}t.version="5.6.2",e.exports=t,t.getFromDisk=function(u,r){if(!r)throw"callback is mandatory.";console.log("Getting recorded "+(u==="all"?"blobs":u+" blob ")+" from disk!"),ce.Fetch(function(a,h){u!=="all"&&h===u+"Blob"&&r&&r(a),u==="all"&&r&&r(a,h.replace("Blob",""))})},t.writeToDisk=function(u){console.log("Writing recorded blob(s) to disk!"),u=u||{},u.audio&&u.video&&u.gif?u.audio.getDataURL(function(r){u.video.getDataURL(function(a){u.gif.getDataURL(function(h){ce.Store({audioBlob:r,videoBlob:a,gifBlob:h})})})}):u.audio&&u.video?u.audio.getDataURL(function(r){u.video.getDataURL(function(a){ce.Store({audioBlob:r,videoBlob:a})})}):u.audio&&u.gif?u.audio.getDataURL(function(r){u.gif.getDataURL(function(a){ce.Store({audioBlob:r,gifBlob:a})})}):u.video&&u.gif?u.video.getDataURL(function(r){u.gif.getDataURL(function(a){ce.Store({videoBlob:r,gifBlob:a})})}):u.audio?u.audio.getDataURL(function(r){ce.Store({audioBlob:r})}):u.video?u.video.getDataURL(function(r){ce.Store({videoBlob:r})}):u.gif&&u.gif.getDataURL(function(r){ce.Store({gifBlob:r})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(u,r){return!r.recorderType&&!r.type&&(r.audio&&r.video?r.type="video":r.audio&&!r.video&&(r.type="audio")),r.recorderType&&!r.type&&(r.recorderType===je||r.recorderType===Ie||typeof De<"u"&&r.recorderType===De?r.type="video":r.recorderType===_e?r.type="gif":r.recorderType===Ne?r.type="audio":r.recorderType===oe&&(G(u,"audio").length&&G(u,"video").length||!G(u,"audio").length&&G(u,"video").length?r.type="video":G(u,"audio").length&&!G(u,"video").length&&(r.type="audio"))),typeof oe<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(r.mimeType||(r.mimeType="video/webm"),r.type||(r.type=r.mimeType.split("/")[0]),r.bitsPerSecond),r.type||(r.mimeType&&(r.type=r.mimeType.split("/")[0]),r.type||(r.type="audio")),r}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(u,r){var a;return(M||S||V)&&(a=Ne),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!M&&(a=oe),r.type==="video"&&(M||V)&&(a=je,typeof De<"u"&&typeof ReadableStream<"u"&&(a=De)),r.type==="gif"&&(a=_e),r.type==="canvas"&&(a=Ie),Te()&&a!==Ie&&a!==_e&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(G(u,"video").length||G(u,"audio").length)&&(r.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(a=oe):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(a=oe)),u instanceof Array&&u.length&&(a=At),r.recorderType&&(a=r.recorderType),!r.disableLogs&&a&&a.name&&console.log("Using recorderType:",a.name||a.constructor.name),!a&&F&&(a=oe),a}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function o(u){this.addStream=function(r){r&&(u=r)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r=this.mediaType,a,h=this.mimeType||{audio:null,video:null,gif:null};if(typeof r.audio!="function"&&Te()&&!G(u,"audio").length&&(r.audio=!1),typeof r.video!="function"&&Te()&&!G(u,"video").length&&(r.video=!1),typeof r.gif!="function"&&Te()&&!G(u,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(a=null,typeof r.audio=="function"&&(a=r.audio),this.audioRecorder=new t(u,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:a,mimeType:h.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){a=null,typeof r.video=="function"&&(a=r.video);var m=u;if(Te()&&r.audio&&typeof r.audio=="function"){var p=G(u,"video")[0];ee?(m=new W,m.addTrack(p),a&&a===je&&(a=oe)):(m=new W,m.addTrack(p))}this.videoRecorder=new t(m,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:a,mimeType:h.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var w=this,f=Te()===!0;(r.audio instanceof Ne&&r.video||r.audio!==!0&&r.video!==!0&&r.audio!==r.video)&&(f=!1),f===!0?(w.audioRecorder=null,w.videoRecorder.startRecording()):w.videoRecorder.initRecorder(function(){w.audioRecorder.initRecorder(function(){w.videoRecorder.startRecording(),w.audioRecorder.startRecording()})})}r.gif&&(a=null,typeof r.gif=="function"&&(a=r.gif),this.gifRecorder=new t(u,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:a,mimeType:h.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(r){r=r||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(a){r(a,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(a){r(a,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(a){r(a,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(r){var a={};return this.audioRecorder&&(a.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(a.video=this.videoRecorder.getBlob()),this.gifRecorder&&(a.gif=this.gifRecorder.getBlob()),r&&r(a),a},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(r){this.getBlob(function(m){m.audio&&m.video?a(m.audio,function(p){a(m.video,function(w){r({audio:p,video:w})})}):m.audio?a(m.audio,function(p){r({audio:p})}):m.video&&a(m.video,function(p){r({video:p})})});function a(m,p){if(typeof Worker<"u"){var w=h(function(O){postMessage(new FileReaderSync().readAsDataURL(O))});w.onmessage=function(T){p(T.data)},w.postMessage(m)}else{var f=new FileReader;f.readAsDataURL(m),f.onload=function(T){p(T.target.result)}}}function h(m){var p=E.createObjectURL(new Blob([m.toString(),"this.onmessage =  function (eee) {"+m.name+"(eee.data);}"],{type:"application/javascript"})),w=new Worker(p),f;if(typeof E<"u")f=E;else if(typeof webkitURL<"u")f=webkitURL;else throw"Neither URL nor webkitURL detected.";return f.revokeObjectURL(p),w}},this.writeToDisk=function(){t.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(r){r=r||{audio:!0,video:!0,gif:!0},r.audio&&this.audioRecorder&&this.audioRecorder.save(typeof r.audio=="string"?r.audio:""),r.video&&this.videoRecorder&&this.videoRecorder.save(typeof r.video=="string"?r.video:""),r.gif&&this.gifRecorder&&this.gifRecorder.save(typeof r.gif=="string"?r.gif:"")}}o.getFromDisk=t.getFromDisk,o.writeToDisk=t.writeToDisk,typeof t<"u"&&(t.MRecordRTC=o);var d="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(u){u&&(typeof window<"u"||typeof q>"u"||(q.navigator={userAgent:d,getUserMedia:function(){}},q.console||(q.console={}),(typeof q.console.log>"u"||typeof q.console.error>"u")&&(q.console.error=q.console.log=q.console.log||function(){console.log(arguments)}),typeof document>"u"&&(u.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var r={getContext:function(){return r},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return r},u.HTMLVideoElement=function(){}),typeof location>"u"&&(u.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(u.screen={width:0,height:0}),typeof E>"u"&&(u.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),u.window=q))})(typeof q<"u"?q:null);var s=window.requestAnimationFrame;if(typeof s>"u"){if(typeof webkitRequestAnimationFrame<"u")s=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")s=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")s=msRequestAnimationFrame;else if(typeof s>"u"){var y=0;s=function(u,r){var a=new Date().getTime(),h=Math.max(0,16-(a-y)),m=setTimeout(function(){u(a+h)},h);return y=a+h,m}}}var D=window.cancelAnimationFrame;typeof D>"u"&&(typeof webkitCancelAnimationFrame<"u"?D=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?D=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?D=msCancelAnimationFrame:typeof D>"u"&&(D=function(u){clearTimeout(u)}));var P=window.AudioContext;typeof P>"u"&&(typeof webkitAudioContext<"u"&&(P=webkitAudioContext),typeof mozAudioContext<"u"&&(P=mozAudioContext));var E=window.URL;typeof E>"u"&&typeof webkitURL<"u"&&(E=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var S=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),V=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,ee=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),M=!V&&!S&&!!navigator.webkitGetUserMedia||fe()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,F=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);F&&!M&&navigator.userAgent.indexOf("CriOS")!==-1&&(F=!1,M=!0);var W=window.MediaStream;typeof W>"u"&&typeof webkitMediaStream<"u"&&(W=webkitMediaStream),typeof W<"u"&&typeof W.prototype.stop>"u"&&(W.prototype.stop=function(){this.getTracks().forEach(function(u){u.stop()})});function $(u){var r=1e3,a=["Bytes","KB","MB","GB","TB"];if(u===0)return"0 Bytes";var h=parseInt(Math.floor(Math.log(u)/Math.log(r)),10);return(u/Math.pow(r,h)).toPrecision(3)+" "+a[h]}function de(u,r){if(!u)throw"Blob object is required.";if(!u.type)try{u.type="video/webm"}catch{}var a=(u.type||"video/webm").split("/")[1];if(a.indexOf(";")!==-1&&(a=a.split(";")[0]),r&&r.indexOf(".")!==-1){var h=r.split(".");r=h[0],a=h[1]}var m=(r||Math.round(Math.random()*9999999999)+888888888)+"."+a;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(u,m);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(u,m);var p=document.createElement("a");p.href=E.createObjectURL(u),p.download=m,p.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(p),typeof p.click=="function"?p.click():(p.target="_blank",p.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),E.revokeObjectURL(p.href)}function fe(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function G(u,r){return!u||!u.getTracks?[]:u.getTracks().filter(function(a){return a.kind===(r||"audio")})}function Tt(u,r){"srcObject"in r?r.srcObject=u:"mozSrcObject"in r?r.mozSrcObject=u:r.srcObject=u}function wr(u,r){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var a=new EBML.Reader,h=new EBML.Decoder,m=EBML.tools,p=new FileReader;p.onload=function(w){var f=h.decode(this.result);f.forEach(function(L){a.read(L)}),a.stop();var T=m.makeMetadataSeekable(a.metadatas,a.duration,a.cues),O=this.result.slice(a.metadataSize),R=new Blob([T,O],{type:"video/webm"});r(R)},p.readAsArrayBuffer(u)}typeof t<"u"&&(t.invokeSaveAsDialog=de,t.getTracks=G,t.getSeekableBlob=wr,t.bytesToSize=$,t.isElectron=fe);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Ee={};typeof P<"u"?Ee.AudioContext=P:typeof webkitAudioContext<"u"&&(Ee.AudioContext=webkitAudioContext),typeof t<"u"&&(t.Storage=Ee);function Te(){if(ee||F||S)return!0;var u=navigator.userAgent,r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10),h,m;return(M||V)&&(h=u.indexOf("Chrome"),r=u.substring(h+7)),(m=r.indexOf(";"))!==-1&&(r=r.substring(0,m)),(m=r.indexOf(" "))!==-1&&(r=r.substring(0,m)),a=parseInt(""+r,10),isNaN(a)&&(r=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10)),a>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function oe(u,r){var R=this;if(typeof u>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(r=r||{mimeType:"video/webm"},r.type==="audio"){if(G(u,"video").length&&G(u,"audio").length){var a;navigator.mozGetUserMedia?(a=new W,a.addTrack(G(u,"audio")[0])):a=new W(G(u,"audio")),u=a}(!r.mimeType||r.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(r.mimeType=M?"audio/webm":"audio/ogg"),r.mimeType&&r.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(r.mimeType="audio/ogg")}var h=[];this.getArrayOfBlobs=function(){return h},this.record=function(){R.blob=null,R.clearRecordedData(),R.timestamps=[],O=[],h=[];var L=r;r.disableLogs||console.log("Passing following config over MediaRecorder API.",L),f&&(f=null),M&&!Te()&&(L="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&L.mimeType&&(MediaRecorder.isTypeSupported(L.mimeType)||(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",L.mimeType),L.mimeType=r.type==="audio"?"audio/webm":"video/webm"));try{f=new MediaRecorder(u,L),r.mimeType=L.mimeType}catch{f=new MediaRecorder(u)}L.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in f&&f.canRecordMimeType(L.mimeType)===!1&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",L.mimeType)),f.ondataavailable=function(C){if(C.data&&O.push("ondataavailable: "+$(C.data.size)),typeof r.timeSlice=="number"){if(C.data&&C.data.size&&(h.push(C.data),m(),typeof r.ondataavailable=="function")){var x=r.getNativeBlob?C.data:new Blob([C.data],{type:p(L)});r.ondataavailable(x)}return}if(!C.data||!C.data.size||C.data.size<100||R.blob){R.recordingCallback&&(R.recordingCallback(new Blob([],{type:p(L)})),R.recordingCallback=null);return}R.blob=r.getNativeBlob?C.data:new Blob([C.data],{type:p(L)}),R.recordingCallback&&(R.recordingCallback(R.blob),R.recordingCallback=null)},f.onstart=function(){O.push("started")},f.onpause=function(){O.push("paused")},f.onresume=function(){O.push("resumed")},f.onstop=function(){O.push("stopped")},f.onerror=function(C){C&&(C.name||(C.name="UnknownError"),O.push("error: "+C),r.disableLogs||(C.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",C):C.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",L.mimeType,") is not supported.",C):C.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",C):C.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",C):console.error("MediaRecorder Error",C)),function(x){if(!R.manuallyStopped&&f&&f.state==="inactive"){delete r.timeslice,f.start(10*60*1e3);return}setTimeout(x,1e3)}(),f.state!=="inactive"&&f.state!=="stopped"&&f.stop())},typeof r.timeSlice=="number"?(m(),f.start(r.timeSlice)):f.start(36e5),r.initCallback&&r.initCallback()},this.timestamps=[];function m(){R.timestamps.push(new Date().getTime()),typeof r.onTimeStamp=="function"&&r.onTimeStamp(R.timestamps[R.timestamps.length-1],R.timestamps)}function p(L){return f&&f.mimeType?f.mimeType:L.mimeType||"video/webm"}this.stop=function(L){L=L||function(){},R.manuallyStopped=!0,f&&(this.recordingCallback=L,f.state==="recording"&&f.stop(),typeof r.timeSlice=="number"&&setTimeout(function(){R.blob=new Blob(h,{type:p(r)}),R.recordingCallback(R.blob)},100))},this.pause=function(){f&&f.state==="recording"&&f.pause()},this.resume=function(){f&&f.state==="paused"&&f.resume()},this.clearRecordedData=function(){f&&f.state==="recording"&&R.stop(w),w()};function w(){h=[],f=null,R.timestamps=[]}var f;this.getInternalRecorder=function(){return f};function T(){if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.blob=null,this.getState=function(){return f&&f.state||"inactive"};var O=[];this.getAllStates=function(){return O},typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!1);var R=this;(function L(){if(!(!f||r.checkForInactiveTracks===!1)){if(T()===!1){r.disableLogs||console.log("MediaStream seems stopped."),R.stop();return}setTimeout(L,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MediaStreamRecorder=oe);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function Ne(u,r){if(!G(u,"audio").length)throw"Your stream has no audio tracks.";r=r||{};var a=this,h=[],m=[],p=!1,w=0,f,T=2,O=r.desiredSampRate;r.leftChannel===!0&&(T=1),r.numberOfAudioChannels===1&&(T=1),(!T||T<1)&&(T=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+T),typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!0);function R(){if(r.checkForInactiveTracks===!1)return!0;if("active"in u){if(!u.active)return!1}else if("ended"in u&&u.ended)return!1;return!0}this.record=function(){if(R()===!1)throw"Please make sure MediaStream is active.";N(),b=A=!1,p=!0,typeof r.timeSlice<"u"&&z()};function L(j,te){function X(Y,xe){var le=Y.numberOfAudioChannels,ne=Y.leftBuffers.slice(0),Re=Y.rightBuffers.slice(0),he=Y.sampleRate,be=Y.internalInterleavedLength,ie=Y.desiredSampRate;le===2&&(ne=nt(ne,be),Re=nt(Re,be),ie&&(ne=Ce(ne,ie,he),Re=Ce(Re,ie,he))),le===1&&(ne=nt(ne,be),ie&&(ne=Ce(ne,ie,he))),ie&&(he=ie);function Ce(Q,pe,se){var ae=Math.round(Q.length*(pe/se)),re=[],ye=Number((Q.length-1)/(ae-1));re[0]=Q[0];for(var Ae=1;Ae<ae-1;Ae++){var st=Ae*ye,xt=Number(Math.floor(st)).toFixed(),Ar=Number(Math.ceil(st)).toFixed(),Er=st-xt;re[Ae]=rt(Q[xt],Q[Ar],Er)}return re[ae-1]=Q[Q.length-1],re}function rt(Q,pe,se){return Q+(pe-Q)*se}function nt(Q,pe){for(var se=new Float64Array(pe),ae=0,re=Q.length,ye=0;ye<re;ye++){var Ae=Q[ye];se.set(Ae,ae),ae+=Ae.length}return se}function Rr(Q,pe){for(var se=Q.length+pe.length,ae=new Float64Array(se),re=0,ye=0;ye<se;)ae[ye++]=Q[re],ae[ye++]=pe[re],re++;return ae}function ze(Q,pe,se){for(var ae=se.length,re=0;re<ae;re++)Q.setUint8(pe+re,se.charCodeAt(re))}var We;le===2&&(We=Rr(ne,Re)),le===1&&(We=ne);var He=We.length,Sr=44+He*2,it=new ArrayBuffer(Sr),Z=new DataView(it);ze(Z,0,"RIFF"),Z.setUint32(4,36+He*2,!0),ze(Z,8,"WAVE"),ze(Z,12,"fmt "),Z.setUint32(16,16,!0),Z.setUint16(20,1,!0),Z.setUint16(22,le,!0),Z.setUint32(24,he,!0),Z.setUint32(28,he*le*2,!0),Z.setUint16(32,le*2,!0),Z.setUint16(34,16,!0),ze(Z,36,"data"),Z.setUint32(40,He*2,!0);for(var Tr=He,Et=44,Cr=1,ot=0;ot<Tr;ot++)Z.setInt16(Et,We[ot]*(32767*Cr),!0),Et+=2;if(xe)return xe({buffer:it,view:Z});postMessage({buffer:it,view:Z})}if(j.noWorker){X(j,function(Y){te(Y.buffer,Y.view)});return}var ge=C(X);ge.onmessage=function(Y){te(Y.data.buffer,Y.data.view),E.revokeObjectURL(ge.workerURL),ge.terminate()},ge.postMessage(j)}function C(j){var te=E.createObjectURL(new Blob([j.toString(),";this.onmessage =  function (eee) {"+j.name+"(eee.data);}"],{type:"application/javascript"})),X=new Worker(te);return X.workerURL=te,X}this.stop=function(j){j=j||function(){},p=!1,L({desiredSampRate:O,sampleRate:l,numberOfAudioChannels:T,internalInterleavedLength:w,leftBuffers:h,rightBuffers:T===1?[]:m,noWorker:r.noWorker},function(te,X){a.blob=new Blob([X],{type:"audio/wav"}),a.buffer=new ArrayBuffer(X.buffer.byteLength),a.view=X,a.sampleRate=O||l,a.bufferSize=I,a.length=w,b=!1,j&&j(a.blob)})},typeof t.Storage>"u"&&(t.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!t.Storage.AudioContextConstructor||t.Storage.AudioContextConstructor.state==="closed")&&(t.Storage.AudioContextConstructor=new t.Storage.AudioContext);var x=t.Storage.AudioContextConstructor,g=x.createMediaStreamSource(u),U=[0,256,512,1024,2048,4096,8192,16384],I=typeof r.bufferSize>"u"?4096:r.bufferSize;if(U.indexOf(I)===-1&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(U,null,"	"))),x.createJavaScriptNode)f=x.createJavaScriptNode(I,T,T);else if(x.createScriptProcessor)f=x.createScriptProcessor(I,T,T);else throw"WebAudio API has no support on this browser.";g.connect(f),r.bufferSize||(I=f.bufferSize);var l=typeof r.sampleRate<"u"?r.sampleRate:x.sampleRate||44100;(l<22050||l>96e3)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var A=!1;this.pause=function(){A=!0},this.resume=function(){if(R()===!1)throw"Please make sure MediaStream is active.";if(!p){r.disableLogs||console.log("Seems recording has been restarted."),this.record();return}A=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,p&&this.stop(c),c()};function N(){h=[],m=[],w=0,b=!1,p=!1,A=!1,x=null,a.leftchannel=h,a.rightchannel=m,a.numberOfAudioChannels=T,a.desiredSampRate=O,a.sampleRate=l,a.recordingLength=w,B={left:[],right:[],recordingLength:0}}function c(){f&&(f.onaudioprocess=null,f.disconnect(),f=null),g&&(g.disconnect(),g=null),N()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var b=!1;function k(j){if(!A){if(R()===!1&&(r.disableLogs||console.log("MediaStream seems stopped."),f.disconnect(),p=!1),!p){g&&(g.disconnect(),g=null);return}b||(b=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var te=j.inputBuffer.getChannelData(0),X=new Float32Array(te);if(h.push(X),T===2){var ge=j.inputBuffer.getChannelData(1),Y=new Float32Array(ge);m.push(Y)}w+=I,a.recordingLength=w,typeof r.timeSlice<"u"&&(B.recordingLength+=I,B.left.push(X),T===2&&B.right.push(Y))}}f.onaudioprocess=k,x.createMediaStreamDestination?f.connect(x.createMediaStreamDestination()):f.connect(x.destination),this.leftchannel=h,this.rightchannel=m,this.numberOfAudioChannels=T,this.desiredSampRate=O,this.sampleRate=l,a.recordingLength=w;var B={left:[],right:[],recordingLength:0};function z(){!p||typeof r.ondataavailable!="function"||typeof r.timeSlice>"u"||(B.left.length?(L({desiredSampRate:O,sampleRate:l,numberOfAudioChannels:T,internalInterleavedLength:B.recordingLength,leftBuffers:B.left,rightBuffers:T===1?[]:B.right},function(j,te){var X=new Blob([te],{type:"audio/wav"});r.ondataavailable(X),setTimeout(z,r.timeSlice)}),B={left:[],right:[],recordingLength:0}):setTimeout(z,r.timeSlice))}}typeof t<"u"&&(t.StereoAudioRecorder=Ne);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function Ie(u,r){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";r=r||{},r.frameInterval||(r.frameInterval=10);var a=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(U){U in document.createElement("canvas")&&(a=!0)});var h=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,m=50,p=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);h&&p&&p[2]&&(m=parseInt(p[2],10)),h&&m<52&&(a=!1),r.useWhammyRecorder&&(a=!1);var w,f;if(a)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),u instanceof HTMLCanvasElement)w=u;else if(u instanceof CanvasRenderingContext2D)w=u.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var T;this.record=function(){if(T=!0,a&&!r.useWhammyRecorder){var U;"captureStream"in w?U=w.captureStream(25):"mozCaptureStream"in w?U=w.mozCaptureStream(25):"webkitCaptureStream"in w&&(U=w.webkitCaptureStream(25));try{var I=new W;I.addTrack(G(U,"video")[0]),U=I}catch{}if(!U)throw"captureStream API are NOT available.";f=new oe(U,{mimeType:r.mimeType||"video/webm"}),f.record()}else g.frames=[],x=new Date().getTime(),C();r.initCallback&&r.initCallback()},this.getWebPImages=function(U){if(u.nodeName.toLowerCase()!=="canvas"){U();return}var I=g.frames.length;g.frames.forEach(function(l,A){var N=I-A;r.disableLogs||console.log(N+"/"+I+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(N,I);var c=l.image.toDataURL("image/webp",1);g.frames[A].image=c}),r.disableLogs||console.log("Generating WebM"),U()},this.stop=function(U){T=!1;var I=this;if(a&&f){f.stop(U);return}this.getWebPImages(function(){g.compile(function(l){r.disableLogs||console.log("Recording finished!"),I.blob=l,I.blob.forEach&&(I.blob=new Blob([],{type:"video/webm"})),U&&U(I.blob),g.frames=[]})})};var O=!1;this.pause=function(){if(O=!0,f instanceof oe){f.pause();return}},this.resume=function(){if(O=!1,f instanceof oe){f.resume();return}T||this.record()},this.clearRecordedData=function(){T&&this.stop(R),R()};function R(){g.frames=[],T=!1,O=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function L(){var U=document.createElement("canvas"),I=U.getContext("2d");return U.width=u.width,U.height=u.height,I.drawImage(u,0,0),U}function C(){if(O)return x=new Date().getTime(),setTimeout(C,500);if(u.nodeName.toLowerCase()==="canvas"){var U=new Date().getTime()-x;x=new Date().getTime(),g.frames.push({image:L(),duration:U}),T&&setTimeout(C,r.frameInterval);return}html2canvas(u,{grabMouse:typeof r.showMousePointer>"u"||r.showMousePointer,onrendered:function(I){var l=new Date().getTime()-x;if(!l)return setTimeout(C,r.frameInterval);x=new Date().getTime(),g.frames.push({image:I.toDataURL("image/webp",1),duration:l}),T&&setTimeout(C,r.frameInterval)}})}var x=new Date().getTime(),g=new tt.Video(100)}typeof t<"u"&&(t.CanvasRecorder=Ie);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function je(u,r){r=r||{},r.frameInterval||(r.frameInterval=10),r.disableLogs||console.log("Using frames-interval:",r.frameInterval),this.record=function(){r.width||(r.width=320),r.height||(r.height=240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),T.width=r.canvas.width||320,T.height=r.canvas.height||240,O=T.getContext("2d"),r.video&&r.video instanceof HTMLVideoElement?(R=r.video.cloneNode(),r.initCallback&&r.initCallback()):(R=document.createElement("video"),Tt(u,R),R.onloadedmetadata=function(){r.initCallback&&r.initCallback()},R.width=r.video.width,R.height=r.video.height),R.muted=!0,R.play(),L=new Date().getTime(),C=new tt.Video,r.disableLogs||(console.log("canvas resolutions",T.width,"*",T.height),console.log("video width/height",R.width||T.width,"*",R.height||T.height)),a(r.frameInterval)};function a(x){x=typeof x<"u"?x:10;var g=new Date().getTime()-L;if(!g)return setTimeout(a,x,x);if(w)return L=new Date().getTime(),setTimeout(a,100);L=new Date().getTime(),R.paused&&R.play(),O.drawImage(R,0,0,T.width,T.height),C.frames.push({duration:g,image:T.toDataURL("image/webp")}),p||setTimeout(a,x,x)}function h(x){var g=-1,U=x.length;(function I(){if(g++,g===U){x.callback();return}setTimeout(function(){x.functionToLoop(I,g)},1)})()}function m(x,g,U,I,l){var A=document.createElement("canvas");A.width=T.width,A.height=T.height;var N=A.getContext("2d"),c=[],b=g===-1,k=g&&g>0&&g<=x.length?g:x.length,B={r:0,g:0,b:0},z=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),j=U&&U>=0&&U<=1?U:0,te=I&&I>=0&&I<=1?I:0,X=!1;h({length:k,functionToLoop:function(ge,Y){var xe,le,ne,Re=function(){!X&&ne-xe<=ne*te||(b&&(X=!0),c.push(x[Y])),ge()};if(X)Re();else{var he=new Image;he.onload=function(){N.drawImage(he,0,0,T.width,T.height);var be=N.getImageData(0,0,T.width,T.height);xe=0,le=be.data.length,ne=be.data.length/4;for(var ie=0;ie<le;ie+=4){var Ce={r:be.data[ie],g:be.data[ie+1],b:be.data[ie+2]},rt=Math.sqrt(Math.pow(Ce.r-B.r,2)+Math.pow(Ce.g-B.g,2)+Math.pow(Ce.b-B.b,2));rt<=z*j&&xe++}Re()},he.src=x[Y].image}},callback:function(){c=c.concat(x.slice(k)),c.length<=0&&c.push(x[x.length-1]),l(c)}})}var p=!1;this.stop=function(x){x=x||function(){},p=!0;var g=this;setTimeout(function(){m(C.frames,-1,null,null,function(U){C.frames=U,r.advertisement&&r.advertisement.length&&(C.frames=r.advertisement.concat(C.frames)),C.compile(function(I){g.blob=I,g.blob.forEach&&(g.blob=new Blob([],{type:"video/webm"})),x&&x(g.blob)})})},10)};var w=!1;this.pause=function(){w=!0},this.resume=function(){w=!1,p&&this.record()},this.clearRecordedData=function(){p||this.stop(f),f()};function f(){C.frames=[],p=!0,w=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var T=document.createElement("canvas"),O=T.getContext("2d"),R,L,C}typeof t<"u"&&(t.WhammyRecorder=je);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var tt=function(){function u(h){this.frames=[],this.duration=h||1,this.quality=.8}u.prototype.add=function(h,m){if("canvas"in h&&(h=h.canvas),"toDataURL"in h&&(h=h.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(h))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:h,duration:m||this.duration})};function r(h){var m=E.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),p=new Worker(m);return E.revokeObjectURL(m),p}function a(h){function m(l){var A=w(l);if(!A)return[];for(var N=3e4,c=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:U(A.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:A.width,id:176},{data:A.height,id:186}]}]}]}]}],b=0,k=0;b<l.length;){var B=[],z=0;do B.push(l[b]),z+=l[b].duration,b++;while(b<l.length&&z<N);var j=0,te={id:524531317,data:p(k,j,B)};c[1].data.push(te),k+=z}return R(c)}function p(l,A,N){return[{data:l,id:231}].concat(N.map(function(c){var b=L({discardable:0,frame:c.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(A)});return A+=c.duration,{data:b,id:163}}))}function w(l){if(!l[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var A=l[0].width,N=l[0].height,c=l[0].duration,b=1;b<l.length;b++)c+=l[b].duration;return{duration:c,width:A,height:N}}function f(l){for(var A=[];l>0;)A.push(l&255),l=l>>8;return new Uint8Array(A.reverse())}function T(l){return new Uint8Array(l.split("").map(function(A){return A.charCodeAt(0)}))}function O(l){var A=[],N=l.length%8?new Array(9-l.length%8).join("0"):"";l=N+l;for(var c=0;c<l.length;c+=8)A.push(parseInt(l.substr(c,8),2));return new Uint8Array(A)}function R(l){for(var A=[],N=0;N<l.length;N++){var c=l[N].data;typeof c=="object"&&(c=R(c)),typeof c=="number"&&(c=O(c.toString(2))),typeof c=="string"&&(c=T(c));var b=c.size||c.byteLength||c.length,k=Math.ceil(Math.ceil(Math.log(b)/Math.log(2))/8),B=b.toString(2),z=new Array(k*7+7+1-B.length).join("0")+B,j=new Array(k).join("0")+"1"+z;A.push(f(l[N].id)),A.push(O(j)),A.push(c)}return new Blob(A,{type:"video/webm"})}function L(l){var A=0;if(l.keyframe&&(A|=128),l.invisible&&(A|=8),l.lacing&&(A|=l.lacing<<1),l.discardable&&(A|=1),l.trackNum>127)throw"TrackNumber > 127 not supported";var N=[l.trackNum|128,l.timecode>>8,l.timecode&255,A].map(function(c){return String.fromCharCode(c)}).join("")+l.frame;return N}function C(l){for(var A=l.RIFF[0].WEBP[0],N=A.indexOf("*"),c=0,b=[];c<4;c++)b[c]=A.charCodeAt(N+3+c);var k,B,z;return z=b[1]<<8|b[0],k=z&16383,z=b[3]<<8|b[2],B=z&16383,{width:k,height:B,data:A,riff:l}}function x(l,A){return parseInt(l.substr(A+4,4).split("").map(function(N){var c=N.charCodeAt(0).toString(2);return new Array(8-c.length+1).join("0")+c}).join(""),2)}function g(l){for(var A=0,N={};A<l.length;){var c=l.substr(A,4),b=x(l,A),k=l.substr(A+4+4,b);A+=4+4+b,N[c]=N[c]||[],c==="RIFF"||c==="LIST"?N[c].push(g(k)):N[c].push(k)}return N}function U(l){return[].slice.call(new Uint8Array(new Float64Array([l]).buffer),0).map(function(A){return String.fromCharCode(A)}).reverse().join("")}var I=new m(h.map(function(l){var A=C(g(atob(l.image.slice(23))));return A.duration=l.duration,A}));postMessage(I)}return u.prototype.compile=function(h){var m=r(a);m.onmessage=function(p){if(p.data.error){console.error(p.data.error);return}h(p.data)},m.postMessage(this.frames)},{Video:u}}();typeof t<"u"&&(t.Whammy=tt);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var ce={init:function(){var u=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var r=1,a=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h,m=indexedDB.open(a,r);function p(f){f.createObjectStore(u.dataStoreName)}function w(){var f=h.transaction([u.dataStoreName],"readwrite");u.videoBlob&&f.objectStore(u.dataStoreName).put(u.videoBlob,"videoBlob"),u.gifBlob&&f.objectStore(u.dataStoreName).put(u.gifBlob,"gifBlob"),u.audioBlob&&f.objectStore(u.dataStoreName).put(u.audioBlob,"audioBlob");function T(O){f.objectStore(u.dataStoreName).get(O).onsuccess=function(R){u.callback&&u.callback(R.target.result,O)}}T("audioBlob"),T("videoBlob"),T("gifBlob")}m.onerror=u.onError,m.onsuccess=function(){if(h=m.result,h.onerror=u.onError,h.setVersion)if(h.version!==r){var f=h.setVersion(r);f.onsuccess=function(){p(h),w()}}else w();else w()},m.onupgradeneeded=function(f){p(f.target.result)}},Fetch:function(u){return this.callback=u,this.init(),this},Store:function(u){return this.audioBlob=u.audioBlob,this.videoBlob=u.videoBlob,this.gifBlob=u.gifBlob,this.init(),this},onError:function(u){console.error(JSON.stringify(u,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof t<"u"&&(t.DiskStorage=ce);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function _e(u,r){if(typeof GIFEncoder>"u"){var a=document.createElement("script");a.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(a)}r=r||{};var h=u instanceof CanvasRenderingContext2D||u instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(x.record,1e3);return}if(!T){setTimeout(x.record,1e3);return}h||(r.width||(r.width=O.offsetWidth||320),r.height||(r.height=O.offsetHeight||240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),w.width=r.canvas.width||320,w.height=r.canvas.height||240,O.width=r.video.width||320,O.height=r.video.height||240),C=new GIFEncoder,C.setRepeat(0),C.setDelay(r.frameRate||200),C.setQuality(r.quality||10),C.start(),typeof r.onGifRecordingStarted=="function"&&r.onGifRecordingStarted();function g(U){if(x.clearedRecordedData!==!0){if(m)return setTimeout(function(){g(U)},100);R=s(g),typeof L===void 0&&(L=U),!(U-L<90)&&(!h&&O.paused&&O.play(),h||f.drawImage(O,0,0,w.width,w.height),r.onGifPreview&&r.onGifPreview(w.toDataURL("image/png")),C.addFrame(f),L=U)}}R=s(g),r.initCallback&&r.initCallback()},this.stop=function(g){g=g||function(){},R&&D(R),this.blob=new Blob([new Uint8Array(C.stream().bin)],{type:"image/gif"}),g(this.blob),C.stream().bin=[]};var m=!1;this.pause=function(){m=!0},this.resume=function(){m=!1},this.clearRecordedData=function(){x.clearedRecordedData=!0,p()};function p(){C&&(C.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var w=document.createElement("canvas"),f=w.getContext("2d");h&&(u instanceof CanvasRenderingContext2D?(f=u,w=f.canvas):u instanceof HTMLCanvasElement&&(f=u.getContext("2d"),w=u));var T=!0;if(!h){var O=document.createElement("video");O.muted=!0,O.autoplay=!0,O.playsInline=!0,T=!1,O.onloadedmetadata=function(){T=!0},Tt(u,O),O.play()}var R=null,L,C,x=this}typeof t<"u"&&(t.GifRecorder=_e);function Ct(u,r){var a="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(c){typeof t<"u"||c&&(typeof window<"u"||typeof q>"u"||(q.navigator={userAgent:a,getUserMedia:function(){}},q.console||(q.console={}),(typeof q.console.log>"u"||typeof q.console.error>"u")&&(q.console.error=q.console.log=q.console.log||function(){console.log(arguments)}),typeof document>"u"&&(c.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var b={getContext:function(){return b},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return b},c.HTMLVideoElement=function(){}),typeof location>"u"&&(c.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(c.screen={width:0,height:0}),typeof O>"u"&&(c.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),c.window=q))})(typeof q<"u"?q:null),r=r||"multi-streams-mixer";var h=[],m=!1,p=document.createElement("canvas"),w=p.getContext("2d");p.style.opacity=0,p.style.position="absolute",p.style.zIndex=-1,p.style.top="-1000em",p.style.left="-1000em",p.className=r,(document.body||document.documentElement).appendChild(p),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var f=this,T=window.AudioContext;typeof T>"u"&&(typeof webkitAudioContext<"u"&&(T=webkitAudioContext),typeof mozAudioContext<"u"&&(T=mozAudioContext));var O=window.URL;typeof O>"u"&&typeof webkitURL<"u"&&(O=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var R=window.MediaStream;typeof R>"u"&&typeof webkitMediaStream<"u"&&(R=webkitMediaStream),typeof R<"u"&&typeof R.prototype.stop>"u"&&(R.prototype.stop=function(){this.getTracks().forEach(function(c){c.stop()})});var L={};typeof T<"u"?L.AudioContext=T:typeof webkitAudioContext<"u"&&(L.AudioContext=webkitAudioContext);function C(c,b){"srcObject"in b?b.srcObject=c:"mozSrcObject"in b?b.mozSrcObject=c:b.srcObject=c}this.startDrawingFrames=function(){x()};function x(){if(!m){var c=h.length,b=!1,k=[];if(h.forEach(function(z){z.stream||(z.stream={}),z.stream.fullcanvas?b=z:k.push(z)}),b)p.width=b.stream.width,p.height=b.stream.height;else if(k.length){p.width=c>1?k[0].width*2:k[0].width;var B=1;(c===3||c===4)&&(B=2),(c===5||c===6)&&(B=3),(c===7||c===8)&&(B=4),(c===9||c===10)&&(B=5),p.height=k[0].height*B}else p.width=f.width||360,p.height=f.height||240;b&&b instanceof HTMLVideoElement&&g(b),k.forEach(function(z,j){g(z,j)}),setTimeout(x,f.frameInterval)}}function g(c,b){if(!m){var k=0,B=0,z=c.width,j=c.height;b===1&&(k=c.width),b===2&&(B=c.height),b===3&&(k=c.width,B=c.height),b===4&&(B=c.height*2),b===5&&(k=c.width,B=c.height*2),b===6&&(B=c.height*3),b===7&&(k=c.width,B=c.height*3),typeof c.stream.left<"u"&&(k=c.stream.left),typeof c.stream.top<"u"&&(B=c.stream.top),typeof c.stream.width<"u"&&(z=c.stream.width),typeof c.stream.height<"u"&&(j=c.stream.height),w.drawImage(c,k,B,z,j),typeof c.stream.onRender=="function"&&c.stream.onRender(w,k,B,z,j,b)}}function U(){m=!1;var c=I(),b=l();return b&&b.getTracks().filter(function(k){return k.kind==="audio"}).forEach(function(k){c.addTrack(k)}),u.forEach(function(k){k.fullcanvas}),c}function I(){N();var c;"captureStream"in p?c=p.captureStream():"mozCaptureStream"in p?c=p.mozCaptureStream():f.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var b=new R;return c.getTracks().filter(function(k){return k.kind==="video"}).forEach(function(k){b.addTrack(k)}),p.stream=b,b}function l(){L.AudioContextConstructor||(L.AudioContextConstructor=new L.AudioContext),f.audioContext=L.AudioContextConstructor,f.audioSources=[],f.useGainNode===!0&&(f.gainNode=f.audioContext.createGain(),f.gainNode.connect(f.audioContext.destination),f.gainNode.gain.value=0);var c=0;if(u.forEach(function(b){if(b.getTracks().filter(function(B){return B.kind==="audio"}).length){c++;var k=f.audioContext.createMediaStreamSource(b);f.useGainNode===!0&&k.connect(f.gainNode),f.audioSources.push(k)}}),!!c)return f.audioDestination=f.audioContext.createMediaStreamDestination(),f.audioSources.forEach(function(b){b.connect(f.audioDestination)}),f.audioDestination.stream}function A(c){var b=document.createElement("video");return C(c,b),b.className=r,b.muted=!0,b.volume=0,b.width=c.width||f.width||360,b.height=c.height||f.height||240,b.play(),b}this.appendStreams=function(c){if(!c)throw"First parameter is required.";c instanceof Array||(c=[c]),c.forEach(function(b){var k=new R;if(b.getTracks().filter(function(j){return j.kind==="video"}).length){var B=A(b);B.stream=b,h.push(B),k.addTrack(b.getTracks().filter(function(j){return j.kind==="video"})[0])}if(b.getTracks().filter(function(j){return j.kind==="audio"}).length){var z=f.audioContext.createMediaStreamSource(b);f.audioDestination=f.audioContext.createMediaStreamDestination(),z.connect(f.audioDestination),k.addTrack(f.audioDestination.stream.getTracks().filter(function(j){return j.kind==="audio"})[0])}u.push(k)})},this.releaseStreams=function(){h=[],m=!0,f.gainNode&&(f.gainNode.disconnect(),f.gainNode=null),f.audioSources.length&&(f.audioSources.forEach(function(c){c.disconnect()}),f.audioSources=[]),f.audioDestination&&(f.audioDestination.disconnect(),f.audioDestination=null),f.audioContext&&f.audioContext.close(),f.audioContext=null,w.clearRect(0,0,p.width,p.height),p.stream&&(p.stream.stop(),p.stream=null)},this.resetVideoStreams=function(c){c&&!(c instanceof Array)&&(c=[c]),N(c)};function N(c){h=[],c=c||u,c.forEach(function(b){if(b.getTracks().filter(function(B){return B.kind==="video"}).length){var k=A(b);k.stream=b,h.push(k)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=U}typeof t>"u"&&(e.exports=Ct);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function At(u,r){u=u||[];var a=this,h,m;r=r||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},r.frameInterval||(r.frameInterval=10),r.video||(r.video={}),r.video.width||(r.video.width=360),r.video.height||(r.video.height=240),this.record=function(){h=new Ct(u,r.elementClass||"multi-streams-mixer"),p().length&&(h.frameInterval=r.frameInterval||10,h.width=r.video.width||360,h.height=r.video.height||240,h.startDrawingFrames()),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()),m=new oe(h.getMixedStream(),r),m.record()};function p(){var w=[];return u.forEach(function(f){G(f,"video").forEach(function(T){w.push(T)})}),w}this.stop=function(w){m&&m.stop(function(f){a.blob=f,w(f),a.clearRecordedData()})},this.pause=function(){m&&m.pause()},this.resume=function(){m&&m.resume()},this.clearRecordedData=function(){m&&(m.clearRecordedData(),m=null),h&&(h.releaseStreams(),h=null)},this.addStreams=function(w){if(!w)throw"First parameter is required.";w instanceof Array||(w=[w]),u.concat(w),!(!m||!h)&&(h.appendStreams(w),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()))},this.resetVideoStreams=function(w){h&&(w&&!(w instanceof Array)&&(w=[w]),h.resetVideoStreams(w))},this.getMixer=function(){return h},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof t<"u"&&(t.MultiStreamRecorder=At);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function gr(u,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof u>"u")throw'First argument "MediaStream" is required.';var a=this;a.recordRTC=new t(u,r),this.startRecording=function(){return new Promise(function(h,m){try{a.recordRTC.startRecording(),h()}catch(p){m(p)}})},this.stopRecording=function(){return new Promise(function(h,m){try{a.recordRTC.stopRecording(function(p){if(a.blob=a.recordRTC.getBlob(),!a.blob||!a.blob.size){m("Empty blob.",a.blob);return}h(p)})}catch(p){m(p)}})},this.pauseRecording=function(){return new Promise(function(h,m){try{a.recordRTC.pauseRecording(),h()}catch(p){m(p)}})},this.resumeRecording=function(){return new Promise(function(h,m){try{a.recordRTC.resumeRecording(),h()}catch(p){m(p)}})},this.getDataURL=function(h){return new Promise(function(m,p){try{a.recordRTC.getDataURL(function(w){m(w)})}catch(w){p(w)}})},this.getBlob=function(){return new Promise(function(h,m){try{h(a.recordRTC.getBlob())}catch(p){m(p)}})},this.getInternalRecorder=function(){return new Promise(function(h,m){try{h(a.recordRTC.getInternalRecorder())}catch(p){m(p)}})},this.reset=function(){return new Promise(function(h,m){try{h(a.recordRTC.reset())}catch(p){m(p)}})},this.destroy=function(){return new Promise(function(h,m){try{h(a.recordRTC.destroy())}catch(p){m(p)}})},this.getState=function(){return new Promise(function(h,m){try{h(a.recordRTC.getState())}catch(p){m(p)}})},this.blob=null,this.version="5.6.2"}typeof t<"u"&&(t.RecordRTCPromisesHandler=gr);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function De(u,r){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),r=r||{},r.width=r.width||640,r.height=r.height||480,r.frameRate=r.frameRate||30,r.bitrate=r.bitrate||1200,r.realtime=r.realtime||!0;var a;function h(){return new ReadableStream({start:function(O){var R=document.createElement("canvas"),L=document.createElement("video"),C=!0;L.srcObject=u,L.muted=!0,L.height=r.height,L.width=r.width,L.volume=0,L.onplaying=function(){R.width=r.width,R.height=r.height;var x=R.getContext("2d"),g=1e3/r.frameRate,U=setInterval(function(){if(a&&(clearInterval(U),O.close()),C&&(C=!1,r.onVideoProcessStarted&&r.onVideoProcessStarted()),x.drawImage(L,0,0),O._controlledReadableStream.state!=="closed")try{O.enqueue(x.getImageData(0,0,r.width,r.height))}catch{}},g)},L.play()}})}var m;function p(O,R){if(!r.workerPath&&!R){a=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(C){C.arrayBuffer().then(function(x){p(O,x)})});return}if(!r.workerPath&&R instanceof ArrayBuffer){var L=new Blob([R],{type:"text/javascript"});r.workerPath=E.createObjectURL(L)}r.workerPath||console.error("workerPath parameter is missing."),m=new Worker(r.workerPath),m.postMessage(r.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),m.addEventListener("message",function(C){C.data==="READY"?(m.postMessage({width:r.width,height:r.height,bitrate:r.bitrate||1200,timebaseDen:r.frameRate||30,realtime:r.realtime}),h().pipeTo(new WritableStream({write:function(x){if(a){console.error("Got image, but recorder is finished!");return}m.postMessage(x.data.buffer,[x.data.buffer])}}))):C.data&&(w||T.push(C.data))})}this.record=function(){T=[],w=!1,this.blob=null,p(u),typeof r.initCallback=="function"&&r.initCallback()};var w;this.pause=function(){w=!0},this.resume=function(){w=!1};function f(O){if(!m){O&&O();return}m.addEventListener("message",function(R){R.data===null&&(m.terminate(),m=null,O&&O())}),m.postMessage(null)}var T=[];this.stop=function(O){a=!0;var R=this;f(function(){R.blob=new Blob(T,{type:"video/webm"}),O(R.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){T=[],w=!1,this.blob=null},this.blob=null}typeof t<"u"&&(t.WebAssemblyRecorder=De)})(fr);var $n=fr.exports,St={exports:{}},Le=typeof Reflect=="object"?Reflect:null,jt=Le&&typeof Le.apply=="function"?Le.apply:function(t,n,i){return Function.prototype.apply.call(t,n,i)},Je;Le&&typeof Le.ownKeys=="function"?Je=Le.ownKeys:Object.getOwnPropertySymbols?Je=function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Je=function(t){return Object.getOwnPropertyNames(t)};function Xn(e){console&&console.warn&&console.warn(e)}var cr=Number.isNaN||function(t){return t!==t};function H(){H.init.call(this)}St.exports=H;St.exports.once=ei;H.EventEmitter=H;H.prototype._events=void 0;H.prototype._eventsCount=0;H.prototype._maxListeners=void 0;var _t=10;function et(e){if(typeof e!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}Object.defineProperty(H,"defaultMaxListeners",{enumerable:!0,get:function(){return _t},set:function(e){if(typeof e!="number"||e<0||cr(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");_t=e}});H.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};H.prototype.setMaxListeners=function(t){if(typeof t!="number"||t<0||cr(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this};function lr(e){return e._maxListeners===void 0?H.defaultMaxListeners:e._maxListeners}H.prototype.getMaxListeners=function(){return lr(this)};H.prototype.emit=function(t){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var o=t==="error",d=this._events;if(d!==void 0)o=o&&d.error===void 0;else if(!o)return!1;if(o){var s;if(n.length>0&&(s=n[0]),s instanceof Error)throw s;var y=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw y.context=s,y}var D=d[t];if(D===void 0)return!1;if(typeof D=="function")jt(D,this,n);else for(var P=D.length,E=br(D,P),i=0;i<P;++i)jt(E[i],this,n);return!0};function hr(e,t,n,i){var o,d,s;if(et(n),d=e._events,d===void 0?(d=e._events=Object.create(null),e._eventsCount=0):(d.newListener!==void 0&&(e.emit("newListener",t,n.listener?n.listener:n),d=e._events),s=d[t]),s===void 0)s=d[t]=n,++e._eventsCount;else if(typeof s=="function"?s=d[t]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),o=lr(e),o>0&&s.length>o&&!s.warned){s.warned=!0;var y=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");y.name="MaxListenersExceededWarning",y.emitter=e,y.type=t,y.count=s.length,Xn(y)}return e}H.prototype.addListener=function(t,n){return hr(this,t,n,!1)};H.prototype.on=H.prototype.addListener;H.prototype.prependListener=function(t,n){return hr(this,t,n,!0)};function Yn(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function pr(e,t,n){var i={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},o=Yn.bind(i);return o.listener=n,i.wrapFn=o,o}H.prototype.once=function(t,n){return et(n),this.on(t,pr(this,t,n)),this};H.prototype.prependOnceListener=function(t,n){return et(n),this.prependListener(t,pr(this,t,n)),this};H.prototype.removeListener=function(t,n){var i,o,d,s,y;if(et(n),o=this._events,o===void 0)return this;if(i=o[t],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete o[t],o.removeListener&&this.emit("removeListener",t,i.listener||n));else if(typeof i!="function"){for(d=-1,s=i.length-1;s>=0;s--)if(i[s]===n||i[s].listener===n){y=i[s].listener,d=s;break}if(d<0)return this;d===0?i.shift():Qn(i,d),i.length===1&&(o[t]=i[0]),o.removeListener!==void 0&&this.emit("removeListener",t,y||n)}return this};H.prototype.off=H.prototype.removeListener;H.prototype.removeAllListeners=function(t){var n,i,o;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[t]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[t]),this;if(arguments.length===0){var d=Object.keys(i),s;for(o=0;o<d.length;++o)s=d[o],s!=="removeListener"&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[t],typeof n=="function")this.removeListener(t,n);else if(n!==void 0)for(o=n.length-1;o>=0;o--)this.removeListener(t,n[o]);return this};function mr(e,t,n){var i=e._events;if(i===void 0)return[];var o=i[t];return o===void 0?[]:typeof o=="function"?n?[o.listener||o]:[o]:n?Zn(o):br(o,o.length)}H.prototype.listeners=function(t){return mr(this,t,!0)};H.prototype.rawListeners=function(t){return mr(this,t,!1)};H.listenerCount=function(e,t){return typeof e.listenerCount=="function"?e.listenerCount(t):vr.call(e,t)};H.prototype.listenerCount=vr;function vr(e){var t=this._events;if(t!==void 0){var n=t[e];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}H.prototype.eventNames=function(){return this._eventsCount>0?Je(this._events):[]};function br(e,t){for(var n=new Array(t),i=0;i<t;++i)n[i]=e[i];return n}function Qn(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function Zn(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}function ei(e,t){return new Promise(function(n,i){function o(s){e.removeListener(t,d),i(s)}function d(){typeof e.removeListener=="function"&&e.removeListener("error",o),n([].slice.call(arguments))}yr(e,t,d,{once:!0}),t!=="error"&&ti(e,o,{once:!0})})}function ti(e,t,n){typeof e.on=="function"&&yr(e,"error",t,n)}function yr(e,t,n,i){if(typeof e.on=="function")i.once?e.once(t,n):e.on(t,n);else if(typeof e.addEventListener=="function")e.addEventListener(t,function o(d){i.once&&e.removeEventListener(t,o),n(d)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e)}var ri=St.exports;const ni=Or(ri),ii="https://api.openai.com/v1/audio/transcriptions";var Be;(function(e){e.Transcribe="Transcribe"})(Be||(Be={}));var zt;(function(e){e.English="en",e.French="fr",e.Spanish="es",e.German="de",e.Italian="it",e.Dutch="nl",e.Russian="ru",e.Mandarin="zh",e.Japanese="ja",e.Korean="ko",e.Arabic="ar",e.Hindi="hi",e.Portuguese="pt",e.Bengali="bn",e.Persian="fa",e.Turkish="tr",e.Polish="pl",e.Romanian="ro",e.Swedish="sv",e.Czech="cs",e.Greek="el",e.Danish="da",e.Finnish="fi",e.Hungarian="hu",e.Indonesian="id",e.Norwegian="no",e.Thai="th",e.Hebrew="he",e.Ukrainian="uk",e.Filipino="tl",e.Vietnamese="vi",e.Urdu="ur",e.Malaysian="ms",e.Bulgarian="bg",e.Croatian="hr",e.Estonian="et",e.Icelandic="is",e.Latvian="lv",e.Lithuanian="lt",e.Maltese="mt",e.Slovak="sk",e.Slovenian="sl",e.Welsh="cy",e.Serbian="sr",e.Albanian="sq",e.Armenian="hy",e.Basque="eu",e.Georgian="ka",e.Yiddish="yi"})(zt||(zt={}));const Wt="audio/webm;codecs=opus";class oi{constructor(t){J(this,"openAiKey");J(this,"timeSlice");J(this,"model");J(this,"prompt");J(this,"language");J(this,"chunks",[]);J(this,"recorder");J(this,"stream");J(this,"recording",!1);J(this,"transcribing",!1);J(this,"transcript","");J(this,"events");J(this,"startRecording",async()=>{this.transcript="",this.events.emit(Be.Transcribe,""),await this.startStreaming(),this.recorder||(this.recorder=new $n.RecordRTCPromisesHandler(this.stream,{mimeType:"audio/webm",timeSlice:this.timeSlice,type:"audio",ondataavailable:this.transcribe}));const t=await this.recorder.getState();(t==="inactive"||t==="stopped")&&await this.recorder.startRecording(),t==="paused"&&await this.recorder.resumeRecording(),this.recording=!0});J(this,"stopRecording",async()=>{if(!this.recorder)return"";const t=await this.recorder.getState();return(t==="recording"||t==="paused")&&await this.recorder.stopRecording(),this.recording=!1,this.stopStreaming(),await this.transcribe(),await this.recorder.destroy(),this.chunks=[],this.recorder=void 0,this.transcript});J(this,"startStreaming",async()=>{this.stream&&this.stream.getTracks().forEach(t=>t.stop()),this.stream=await navigator.mediaDevices.getUserMedia({audio:!0})});J(this,"stopStreaming",()=>{this.stream&&(this.stream.getTracks().forEach(t=>t.stop()),this.stream=void 0)});J(this,"transcribe",async t=>{if(!this.recorder)return;this.transcribing=!0,t&&this.chunks.push(t);const n=t?new Blob(this.chunks,{type:Wt}):await this.recorder.getBlob(),i=new File([n],"speech.webm",{type:Wt}),o=await this.sendToWhisper(i);this.transcript=o,this.transcribing=!1,this.events.emit(Be.Transcribe,o)});J(this,"onTranscript",t=>this.events.on(Be.Transcribe,t));J(this,"sendToWhisper",async t=>{const n=new FormData;return n.append("file",t),n.append("model",this.model),this.language&&n.append("language",this.language),this.prompt&&n.append("prompt",this.prompt),(await Kn.post(ii,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.openAiKey}`}})).data.text});this.openAiKey=t.openAiKey,this.timeSlice=t.timeSlice??2e3,this.model=t.model??"whisper-1",this.prompt=t.prompt??"",this.language=t.language??void 0,this.events=new ni}}class ui{constructor(t){J(this,"instance");this.instance=new oi(t)}start(){this.instance.startRecording()}stop(){this.instance.stopRecording()}onTranscript(t){this.instance.onTranscript(t)}}export{zt as L,ui as W};
