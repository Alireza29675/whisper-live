var hr=Object.defineProperty;var pr=(t,e,n)=>e in t?hr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var K=(t,e,n)=>(pr(t,typeof e!="symbol"?e+"":e,n),n);import{c as H,u as mr,r as We,j as qe}from"./index-a91bfb55.js";const br="_transcription_1a6gl_1",gr="_actions_1a6gl_7",Ct={transcription:br,actions:gr};function Nt(t,e){return function(){return t.apply(e,arguments)}}const{toString:wr}=Object.prototype,{getPrototypeOf:ht}=Object,Je=(t=>e=>{const n=wr.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),me=t=>(t=t.toLowerCase(),e=>Je(e)===t),Ke=t=>e=>typeof e===t,{isArray:Le}=Array,De=Ke("undefined");function yr(t){return t!==null&&!De(t)&&t.constructor!==null&&!De(t.constructor)&&se(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const It=me("ArrayBuffer");function vr(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&It(t.buffer),e}const Rr=Ke("string"),se=Ke("function"),jt=Ke("number"),$e=t=>t!==null&&typeof t=="object",Sr=t=>t===!0||t===!1,He=t=>{if(Je(t)!=="object")return!1;const e=ht(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},Tr=me("Date"),Cr=me("File"),Ar=me("Blob"),xr=me("FileList"),Er=t=>$e(t)&&se(t.pipe),Lr=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||se(t.append)&&((e=Je(t))==="formdata"||e==="object"&&se(t.toString)&&t.toString()==="[object FormData]"))},kr=me("URLSearchParams"),Or=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Be(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,s;if(typeof t!="object"&&(t=[t]),Le(t))for(i=0,s=t.length;i<s;i++)e.call(null,t[i],i,t);else{const d=n?Object.getOwnPropertyNames(t):Object.keys(t),u=d.length;let R;for(i=0;i<u;i++)R=d[i],e.call(null,t[R],R,t)}}function zt(t,e){e=e.toLowerCase();const n=Object.keys(t);let i=n.length,s;for(;i-- >0;)if(s=n[i],e===s.toLowerCase())return s;return null}const Wt=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),qt=t=>!De(t)&&t!==Wt;function ut(){const{caseless:t}=qt(this)&&this||{},e={},n=(i,s)=>{const d=t&&zt(e,s)||s;He(e[d])&&He(i)?e[d]=ut(e[d],i):He(i)?e[d]=ut({},i):Le(i)?e[d]=i.slice():e[d]=i};for(let i=0,s=arguments.length;i<s;i++)arguments[i]&&Be(arguments[i],n);return e}const Dr=(t,e,n,{allOwnKeys:i}={})=>(Be(e,(s,d)=>{n&&se(s)?t[d]=Nt(s,n):t[d]=s},{allOwnKeys:i}),t),Br=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ur=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Mr=(t,e,n,i)=>{let s,d,u;const R={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),d=s.length;d-- >0;)u=s[d],(!i||i(u,t,e))&&!R[u]&&(e[u]=t[u],R[u]=!0);t=n!==!1&&ht(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Fr=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},Pr=t=>{if(!t)return null;if(Le(t))return t;let e=t.length;if(!jt(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Nr=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ht(Uint8Array)),Ir=(t,e)=>{const i=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=i.next())&&!s.done;){const d=s.value;e.call(t,d[0],d[1])}},jr=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},zr=me("HTMLFormElement"),Wr=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,s){return i.toUpperCase()+s}),At=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),qr=me("RegExp"),Ht=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Be(n,(s,d)=>{let u;(u=e(s,d,t))!==!1&&(i[d]=u||s)}),Object.defineProperties(t,i)},Hr=t=>{Ht(t,(e,n)=>{if(se(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(se(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},_r=(t,e)=>{const n={},i=s=>{s.forEach(d=>{n[d]=!0})};return Le(t)?i(t):i(String(t).split(e)),n},Vr=()=>{},Gr=(t,e)=>(t=+t,Number.isFinite(t)?t:e),it="abcdefghijklmnopqrstuvwxyz",xt="0123456789",_t={DIGIT:xt,ALPHA:it,ALPHA_DIGIT:it+it.toUpperCase()+xt},Jr=(t=16,e=_t.ALPHA_DIGIT)=>{let n="";const{length:i}=e;for(;t--;)n+=e[Math.random()*i|0];return n};function Kr(t){return!!(t&&se(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const $r=t=>{const e=new Array(10),n=(i,s)=>{if($e(i)){if(e.indexOf(i)>=0)return;if(!("toJSON"in i)){e[s]=i;const d=Le(i)?[]:{};return Be(i,(u,R)=>{const U=n(u,s+1);!De(U)&&(d[R]=U)}),e[s]=void 0,d}}return i};return n(t,0)},Xr=me("AsyncFunction"),Yr=t=>t&&($e(t)||se(t))&&se(t.then)&&se(t.catch),b={isArray:Le,isArrayBuffer:It,isBuffer:yr,isFormData:Lr,isArrayBufferView:vr,isString:Rr,isNumber:jt,isBoolean:Sr,isObject:$e,isPlainObject:He,isUndefined:De,isDate:Tr,isFile:Cr,isBlob:Ar,isRegExp:qr,isFunction:se,isStream:Er,isURLSearchParams:kr,isTypedArray:Nr,isFileList:xr,forEach:Be,merge:ut,extend:Dr,trim:Or,stripBOM:Br,inherits:Ur,toFlatObject:Mr,kindOf:Je,kindOfTest:me,endsWith:Fr,toArray:Pr,forEachEntry:Ir,matchAll:jr,isHTMLForm:zr,hasOwnProperty:At,hasOwnProp:At,reduceDescriptors:Ht,freezeMethods:Hr,toObjectSet:_r,toCamelCase:Wr,noop:Vr,toFiniteNumber:Gr,findKey:zt,global:Wt,isContextDefined:qt,ALPHABET:_t,generateString:Jr,isSpecCompliantForm:Kr,toJSONObject:$r,isAsyncFn:Xr,isThenable:Yr};function z(t,e,n,i,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),i&&(this.request=i),s&&(this.response=s)}b.inherits(z,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:b.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const Vt=z.prototype,Gt={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{Gt[t]={value:t}});Object.defineProperties(z,Gt);Object.defineProperty(Vt,"isAxiosError",{value:!0});z.from=(t,e,n,i,s,d)=>{const u=Object.create(Vt);return b.toFlatObject(t,u,function(U){return U!==Error.prototype},R=>R!=="isAxiosError"),z.call(u,t.message,e,n,i,s),u.cause=t,u.name=t.name,d&&Object.assign(u,d),u};const Qr=null;function dt(t){return b.isPlainObject(t)||b.isArray(t)}function Jt(t){return b.endsWith(t,"[]")?t.slice(0,-2):t}function Et(t,e,n){return t?t.concat(e).map(function(s,d){return s=Jt(s),!n&&d?"["+s+"]":s}).join(n?".":""):e}function Zr(t){return b.isArray(t)&&!t.some(dt)}const en=b.toFlatObject(b,{},null,function(e){return/^is[A-Z]/.test(e)});function Xe(t,e,n){if(!b.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=b.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(F,q){return!b.isUndefined(q[F])});const i=n.metaTokens,s=n.visitor||E,d=n.dots,u=n.indexes,U=(n.Blob||typeof Blob<"u"&&Blob)&&b.isSpecCompliantForm(e);if(!b.isFunction(s))throw new TypeError("visitor must be a function");function P(D){if(D===null)return"";if(b.isDate(D))return D.toISOString();if(!U&&b.isBlob(D))throw new z("Blob is not supported. Use a Buffer instead.");return b.isArrayBuffer(D)||b.isTypedArray(D)?U&&typeof Blob=="function"?new Blob([D]):Buffer.from(D):D}function E(D,F,q){let J=D;if(D&&!q&&typeof D=="object"){if(b.endsWith(F,"{}"))F=i?F:F.slice(0,-2),D=JSON.stringify(D);else if(b.isArray(D)&&Zr(D)||(b.isFileList(D)||b.endsWith(F,"[]"))&&(J=b.toArray(D)))return F=Jt(F),J.forEach(function(de,V){!(b.isUndefined(de)||de===null)&&e.append(u===!0?Et([F],V,d):u===null?F:F+"[]",P(de))}),!1}return dt(D)?!0:(e.append(Et(q,F,d),P(D)),!1)}const S=[],_=Object.assign(en,{defaultVisitor:E,convertValue:P,isVisitable:dt});function Z(D,F){if(!b.isUndefined(D)){if(S.indexOf(D)!==-1)throw Error("Circular reference detected in "+F.join("."));S.push(D),b.forEach(D,function(J,ue){(!(b.isUndefined(J)||J===null)&&s.call(e,J,b.isString(ue)?ue.trim():ue,F,_))===!0&&Z(J,F?F.concat(ue):[ue])}),S.pop()}}if(!b.isObject(t))throw new TypeError("data must be an object");return Z(t),e}function Lt(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function pt(t,e){this._pairs=[],t&&Xe(t,this,e)}const Kt=pt.prototype;Kt.append=function(e,n){this._pairs.push([e,n])};Kt.toString=function(e){const n=e?function(i){return e.call(this,i,Lt)}:Lt;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function tn(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function $t(t,e,n){if(!e)return t;const i=n&&n.encode||tn,s=n&&n.serialize;let d;if(s?d=s(e,n):d=b.isURLSearchParams(e)?e.toString():new pt(e,n).toString(i),d){const u=t.indexOf("#");u!==-1&&(t=t.slice(0,u)),t+=(t.indexOf("?")===-1?"?":"&")+d}return t}class rn{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){b.forEach(this.handlers,function(i){i!==null&&e(i)})}}const kt=rn,Xt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nn=typeof URLSearchParams<"u"?URLSearchParams:pt,on=typeof FormData<"u"?FormData:null,an=typeof Blob<"u"?Blob:null,sn={isBrowser:!0,classes:{URLSearchParams:nn,FormData:on,Blob:an},protocols:["http","https","file","blob","url","data"]},Yt=typeof window<"u"&&typeof document<"u",un=(t=>Yt&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),dn=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),cn=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Yt,hasStandardBrowserEnv:un,hasStandardBrowserWebWorkerEnv:dn},Symbol.toStringTag,{value:"Module"})),pe={...cn,...sn};function fn(t,e){return Xe(t,new pe.classes.URLSearchParams,Object.assign({visitor:function(n,i,s,d){return pe.isNode&&b.isBuffer(n)?(this.append(i,n.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)}},e))}function ln(t){return b.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function hn(t){const e={},n=Object.keys(t);let i;const s=n.length;let d;for(i=0;i<s;i++)d=n[i],e[d]=t[d];return e}function Qt(t){function e(n,i,s,d){let u=n[d++];const R=Number.isFinite(+u),U=d>=n.length;return u=!u&&b.isArray(s)?s.length:u,U?(b.hasOwnProp(s,u)?s[u]=[s[u],i]:s[u]=i,!R):((!s[u]||!b.isObject(s[u]))&&(s[u]=[]),e(n,i,s[u],d)&&b.isArray(s[u])&&(s[u]=hn(s[u])),!R)}if(b.isFormData(t)&&b.isFunction(t.entries)){const n={};return b.forEachEntry(t,(i,s)=>{e(ln(i),s,n,0)}),n}return null}function pn(t,e,n){if(b.isString(t))try{return(e||JSON.parse)(t),b.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const mt={transitional:Xt,adapter:["xhr","http"],transformRequest:[function(e,n){const i=n.getContentType()||"",s=i.indexOf("application/json")>-1,d=b.isObject(e);if(d&&b.isHTMLForm(e)&&(e=new FormData(e)),b.isFormData(e))return s&&s?JSON.stringify(Qt(e)):e;if(b.isArrayBuffer(e)||b.isBuffer(e)||b.isStream(e)||b.isFile(e)||b.isBlob(e))return e;if(b.isArrayBufferView(e))return e.buffer;if(b.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let R;if(d){if(i.indexOf("application/x-www-form-urlencoded")>-1)return fn(e,this.formSerializer).toString();if((R=b.isFileList(e))||i.indexOf("multipart/form-data")>-1){const U=this.env&&this.env.FormData;return Xe(R?{"files[]":e}:e,U&&new U,this.formSerializer)}}return d||s?(n.setContentType("application/json",!1),pn(e)):e}],transformResponse:[function(e){const n=this.transitional||mt.transitional,i=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&b.isString(e)&&(i&&!this.responseType||s)){const u=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(R){if(u)throw R.name==="SyntaxError"?z.from(R,z.ERR_BAD_RESPONSE,this,null,this.response):R}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:pe.classes.FormData,Blob:pe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};b.forEach(["delete","get","head","post","put","patch"],t=>{mt.headers[t]={}});const bt=mt,mn=b.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bn=t=>{const e={};let n,i,s;return t&&t.split(`
`).forEach(function(u){s=u.indexOf(":"),n=u.substring(0,s).trim().toLowerCase(),i=u.substring(s+1).trim(),!(!n||e[n]&&mn[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Ot=Symbol("internals");function Oe(t){return t&&String(t).trim().toLowerCase()}function _e(t){return t===!1||t==null?t:b.isArray(t)?t.map(_e):String(t)}function gn(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const wn=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function ot(t,e,n,i,s){if(b.isFunction(i))return i.call(this,e,n);if(s&&(e=n),!!b.isString(e)){if(b.isString(i))return e.indexOf(i)!==-1;if(b.isRegExp(i))return i.test(e)}}function yn(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function vn(t,e){const n=b.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(s,d,u){return this[i].call(this,e,s,d,u)},configurable:!0})})}class Ye{constructor(e){e&&this.set(e)}set(e,n,i){const s=this;function d(R,U,P){const E=Oe(U);if(!E)throw new Error("header name must be a non-empty string");const S=b.findKey(s,E);(!S||s[S]===void 0||P===!0||P===void 0&&s[S]!==!1)&&(s[S||U]=_e(R))}const u=(R,U)=>b.forEach(R,(P,E)=>d(P,E,U));return b.isPlainObject(e)||e instanceof this.constructor?u(e,n):b.isString(e)&&(e=e.trim())&&!wn(e)?u(bn(e),n):e!=null&&d(n,e,i),this}get(e,n){if(e=Oe(e),e){const i=b.findKey(this,e);if(i){const s=this[i];if(!n)return s;if(n===!0)return gn(s);if(b.isFunction(n))return n.call(this,s,i);if(b.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Oe(e),e){const i=b.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||ot(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let s=!1;function d(u){if(u=Oe(u),u){const R=b.findKey(i,u);R&&(!n||ot(i,i[R],R,n))&&(delete i[R],s=!0)}}return b.isArray(e)?e.forEach(d):d(e),s}clear(e){const n=Object.keys(this);let i=n.length,s=!1;for(;i--;){const d=n[i];(!e||ot(this,this[d],d,e,!0))&&(delete this[d],s=!0)}return s}normalize(e){const n=this,i={};return b.forEach(this,(s,d)=>{const u=b.findKey(i,d);if(u){n[u]=_e(s),delete n[d];return}const R=e?yn(d):String(d).trim();R!==d&&delete n[d],n[R]=_e(s),i[R]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return b.forEach(this,(i,s)=>{i!=null&&i!==!1&&(n[s]=e&&b.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Ot]=this[Ot]={accessors:{}}).accessors,s=this.prototype;function d(u){const R=Oe(u);i[R]||(vn(s,u),i[R]=!0)}return b.isArray(e)?e.forEach(d):d(e),this}}Ye.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);b.reduceDescriptors(Ye.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});b.freezeMethods(Ye);const we=Ye;function at(t,e){const n=this||bt,i=e||n,s=we.from(i.headers);let d=i.data;return b.forEach(t,function(R){d=R.call(n,d,s.normalize(),e?e.status:void 0)}),s.normalize(),d}function Zt(t){return!!(t&&t.__CANCEL__)}function Ue(t,e,n){z.call(this,t??"canceled",z.ERR_CANCELED,e,n),this.name="CanceledError"}b.inherits(Ue,z,{__CANCEL__:!0});function Rn(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new z("Request failed with status code "+n.status,[z.ERR_BAD_REQUEST,z.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const Sn=pe.hasStandardBrowserEnv?{write(t,e,n,i,s,d){const u=[t+"="+encodeURIComponent(e)];b.isNumber(n)&&u.push("expires="+new Date(n).toGMTString()),b.isString(i)&&u.push("path="+i),b.isString(s)&&u.push("domain="+s),d===!0&&u.push("secure"),document.cookie=u.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Tn(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Cn(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function er(t,e){return t&&!Tn(e)?Cn(t,e):e}const An=pe.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let i;function s(d){let u=d;return e&&(n.setAttribute("href",u),u=n.href),n.setAttribute("href",u),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return i=s(window.location.href),function(u){const R=b.isString(u)?s(u):u;return R.protocol===i.protocol&&R.host===i.host}}():function(){return function(){return!0}}();function xn(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function En(t,e){t=t||10;const n=new Array(t),i=new Array(t);let s=0,d=0,u;return e=e!==void 0?e:1e3,function(U){const P=Date.now(),E=i[d];u||(u=P),n[s]=U,i[s]=P;let S=d,_=0;for(;S!==s;)_+=n[S++],S=S%t;if(s=(s+1)%t,s===d&&(d=(d+1)%t),P-u<e)return;const Z=E&&P-E;return Z?Math.round(_*1e3/Z):void 0}}function Dt(t,e){let n=0;const i=En(50,250);return s=>{const d=s.loaded,u=s.lengthComputable?s.total:void 0,R=d-n,U=i(R),P=d<=u;n=d;const E={loaded:d,total:u,progress:u?d/u:void 0,bytes:R,rate:U||void 0,estimated:U&&u&&P?(u-d)/U:void 0,event:s};E[e?"download":"upload"]=!0,t(E)}}const Ln=typeof XMLHttpRequest<"u",kn=Ln&&function(t){return new Promise(function(n,i){let s=t.data;const d=we.from(t.headers).normalize();let{responseType:u,withXSRFToken:R}=t,U;function P(){t.cancelToken&&t.cancelToken.unsubscribe(U),t.signal&&t.signal.removeEventListener("abort",U)}let E;if(b.isFormData(s)){if(pe.hasStandardBrowserEnv||pe.hasStandardBrowserWebWorkerEnv)d.setContentType(!1);else if((E=d.getContentType())!==!1){const[F,...q]=E?E.split(";").map(J=>J.trim()).filter(Boolean):[];d.setContentType([F||"multipart/form-data",...q].join("; "))}}let S=new XMLHttpRequest;if(t.auth){const F=t.auth.username||"",q=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.set("Authorization","Basic "+btoa(F+":"+q))}const _=er(t.baseURL,t.url);S.open(t.method.toUpperCase(),$t(_,t.params,t.paramsSerializer),!0),S.timeout=t.timeout;function Z(){if(!S)return;const F=we.from("getAllResponseHeaders"in S&&S.getAllResponseHeaders()),J={data:!u||u==="text"||u==="json"?S.responseText:S.response,status:S.status,statusText:S.statusText,headers:F,config:t,request:S};Rn(function(de){n(de),P()},function(de){i(de),P()},J),S=null}if("onloadend"in S?S.onloadend=Z:S.onreadystatechange=function(){!S||S.readyState!==4||S.status===0&&!(S.responseURL&&S.responseURL.indexOf("file:")===0)||setTimeout(Z)},S.onabort=function(){S&&(i(new z("Request aborted",z.ECONNABORTED,t,S)),S=null)},S.onerror=function(){i(new z("Network Error",z.ERR_NETWORK,t,S)),S=null},S.ontimeout=function(){let q=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const J=t.transitional||Xt;t.timeoutErrorMessage&&(q=t.timeoutErrorMessage),i(new z(q,J.clarifyTimeoutError?z.ETIMEDOUT:z.ECONNABORTED,t,S)),S=null},pe.hasStandardBrowserEnv&&(R&&b.isFunction(R)&&(R=R(t)),R||R!==!1&&An(_))){const F=t.xsrfHeaderName&&t.xsrfCookieName&&Sn.read(t.xsrfCookieName);F&&d.set(t.xsrfHeaderName,F)}s===void 0&&d.setContentType(null),"setRequestHeader"in S&&b.forEach(d.toJSON(),function(q,J){S.setRequestHeader(J,q)}),b.isUndefined(t.withCredentials)||(S.withCredentials=!!t.withCredentials),u&&u!=="json"&&(S.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&S.addEventListener("progress",Dt(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&S.upload&&S.upload.addEventListener("progress",Dt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(U=F=>{S&&(i(!F||F.type?new Ue(null,t,S):F),S.abort(),S=null)},t.cancelToken&&t.cancelToken.subscribe(U),t.signal&&(t.signal.aborted?U():t.signal.addEventListener("abort",U)));const D=xn(_);if(D&&pe.protocols.indexOf(D)===-1){i(new z("Unsupported protocol "+D+":",z.ERR_BAD_REQUEST,t));return}S.send(s||null)})},ct={http:Qr,xhr:kn};b.forEach(ct,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Bt=t=>`- ${t}`,On=t=>b.isFunction(t)||t===null||t===!1,tr={getAdapter:t=>{t=b.isArray(t)?t:[t];const{length:e}=t;let n,i;const s={};for(let d=0;d<e;d++){n=t[d];let u;if(i=n,!On(n)&&(i=ct[(u=String(n)).toLowerCase()],i===void 0))throw new z(`Unknown adapter '${u}'`);if(i)break;s[u||"#"+d]=i}if(!i){const d=Object.entries(s).map(([R,U])=>`adapter ${R} `+(U===!1?"is not supported by the environment":"is not available in the build"));let u=e?d.length>1?`since :
`+d.map(Bt).join(`
`):" "+Bt(d[0]):"as no adapter specified";throw new z("There is no suitable adapter to dispatch the request "+u,"ERR_NOT_SUPPORT")}return i},adapters:ct};function st(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ue(null,t)}function Ut(t){return st(t),t.headers=we.from(t.headers),t.data=at.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),tr.getAdapter(t.adapter||bt.adapter)(t).then(function(i){return st(t),i.data=at.call(t,t.transformResponse,i),i.headers=we.from(i.headers),i},function(i){return Zt(i)||(st(t),i&&i.response&&(i.response.data=at.call(t,t.transformResponse,i.response),i.response.headers=we.from(i.response.headers))),Promise.reject(i)})}const Mt=t=>t instanceof we?t.toJSON():t;function Ee(t,e){e=e||{};const n={};function i(P,E,S){return b.isPlainObject(P)&&b.isPlainObject(E)?b.merge.call({caseless:S},P,E):b.isPlainObject(E)?b.merge({},E):b.isArray(E)?E.slice():E}function s(P,E,S){if(b.isUndefined(E)){if(!b.isUndefined(P))return i(void 0,P,S)}else return i(P,E,S)}function d(P,E){if(!b.isUndefined(E))return i(void 0,E)}function u(P,E){if(b.isUndefined(E)){if(!b.isUndefined(P))return i(void 0,P)}else return i(void 0,E)}function R(P,E,S){if(S in e)return i(P,E);if(S in t)return i(void 0,P)}const U={url:d,method:d,data:d,baseURL:u,transformRequest:u,transformResponse:u,paramsSerializer:u,timeout:u,timeoutMessage:u,withCredentials:u,withXSRFToken:u,adapter:u,responseType:u,xsrfCookieName:u,xsrfHeaderName:u,onUploadProgress:u,onDownloadProgress:u,decompress:u,maxContentLength:u,maxBodyLength:u,beforeRedirect:u,transport:u,httpAgent:u,httpsAgent:u,cancelToken:u,socketPath:u,responseEncoding:u,validateStatus:R,headers:(P,E)=>s(Mt(P),Mt(E),!0)};return b.forEach(Object.keys(Object.assign({},t,e)),function(E){const S=U[E]||s,_=S(t[E],e[E],E);b.isUndefined(_)&&S!==R||(n[E]=_)}),n}const rr="1.6.2",gt={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{gt[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Ft={};gt.transitional=function(e,n,i){function s(d,u){return"[Axios v"+rr+"] Transitional option '"+d+"'"+u+(i?". "+i:"")}return(d,u,R)=>{if(e===!1)throw new z(s(u," has been removed"+(n?" in "+n:"")),z.ERR_DEPRECATED);return n&&!Ft[u]&&(Ft[u]=!0,console.warn(s(u," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(d,u,R):!0}};function Dn(t,e,n){if(typeof t!="object")throw new z("options must be an object",z.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let s=i.length;for(;s-- >0;){const d=i[s],u=e[d];if(u){const R=t[d],U=R===void 0||u(R,d,t);if(U!==!0)throw new z("option "+d+" must be "+U,z.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new z("Unknown option "+d,z.ERR_BAD_OPTION)}}const ft={assertOptions:Dn,validators:gt},Re=ft.validators;class Ge{constructor(e){this.defaults=e,this.interceptors={request:new kt,response:new kt}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ee(this.defaults,n);const{transitional:i,paramsSerializer:s,headers:d}=n;i!==void 0&&ft.assertOptions(i,{silentJSONParsing:Re.transitional(Re.boolean),forcedJSONParsing:Re.transitional(Re.boolean),clarifyTimeoutError:Re.transitional(Re.boolean)},!1),s!=null&&(b.isFunction(s)?n.paramsSerializer={serialize:s}:ft.assertOptions(s,{encode:Re.function,serialize:Re.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let u=d&&b.merge(d.common,d[n.method]);d&&b.forEach(["delete","get","head","post","put","patch","common"],D=>{delete d[D]}),n.headers=we.concat(u,d);const R=[];let U=!0;this.interceptors.request.forEach(function(F){typeof F.runWhen=="function"&&F.runWhen(n)===!1||(U=U&&F.synchronous,R.unshift(F.fulfilled,F.rejected))});const P=[];this.interceptors.response.forEach(function(F){P.push(F.fulfilled,F.rejected)});let E,S=0,_;if(!U){const D=[Ut.bind(this),void 0];for(D.unshift.apply(D,R),D.push.apply(D,P),_=D.length,E=Promise.resolve(n);S<_;)E=E.then(D[S++],D[S++]);return E}_=R.length;let Z=n;for(S=0;S<_;){const D=R[S++],F=R[S++];try{Z=D(Z)}catch(q){F.call(this,q);break}}try{E=Ut.call(this,Z)}catch(D){return Promise.reject(D)}for(S=0,_=P.length;S<_;)E=E.then(P[S++],P[S++]);return E}getUri(e){e=Ee(this.defaults,e);const n=er(e.baseURL,e.url);return $t(n,e.params,e.paramsSerializer)}}b.forEach(["delete","get","head","options"],function(e){Ge.prototype[e]=function(n,i){return this.request(Ee(i||{},{method:e,url:n,data:(i||{}).data}))}});b.forEach(["post","put","patch"],function(e){function n(i){return function(d,u,R){return this.request(Ee(R||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:d,data:u}))}}Ge.prototype[e]=n(),Ge.prototype[e+"Form"]=n(!0)});const Ve=Ge;class wt{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(d){n=d});const i=this;this.promise.then(s=>{if(!i._listeners)return;let d=i._listeners.length;for(;d-- >0;)i._listeners[d](s);i._listeners=null}),this.promise.then=s=>{let d;const u=new Promise(R=>{i.subscribe(R),d=R}).then(s);return u.cancel=function(){i.unsubscribe(d)},u},e(function(d,u,R){i.reason||(i.reason=new Ue(d,u,R),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new wt(function(s){e=s}),cancel:e}}}const Bn=wt;function Un(t){return function(n){return t.apply(null,n)}}function Mn(t){return b.isObject(t)&&t.isAxiosError===!0}const lt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(lt).forEach(([t,e])=>{lt[e]=t});const Fn=lt;function nr(t){const e=new Ve(t),n=Nt(Ve.prototype.request,e);return b.extend(n,Ve.prototype,e,{allOwnKeys:!0}),b.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return nr(Ee(t,s))},n}const G=nr(bt);G.Axios=Ve;G.CanceledError=Ue;G.CancelToken=Bn;G.isCancel=Zt;G.VERSION=rr;G.toFormData=Xe;G.AxiosError=z;G.Cancel=G.CanceledError;G.all=function(e){return Promise.all(e)};G.spread=Un;G.isAxiosError=Mn;G.mergeConfig=Ee;G.AxiosHeaders=we;G.formToJSON=t=>Qt(b.isHTMLForm(t)?new FormData(t):t);G.getAdapter=tr.getAdapter;G.HttpStatusCode=Fn;G.default=G;const Pn=G;var ir={exports:{}};(function(t){/**
 * {@link https://github.com/muaz-khan/RecordRTC|RecordRTC} is a WebRTC JavaScript library for audio/video as well as screen activity recording. It supports Chrome, Firefox, Opera, Android, and Microsoft Edge. Platforms: Linux, Mac and Windows. 
 * @summary Record audio, video or screen inside the browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTC
 * @class
 * @example
 * var recorder = RecordRTC(mediaStream or [arrayOfMediaStream], {
 *     type: 'video', // audio or video or gif or canvas
 *     recorderType: MediaStreamRecorder || CanvasRecorder || StereoAudioRecorder || Etc
 * });
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, desiredSampRate: 16000, video: HTMLVideoElement, etc.}
 */function e(a,r){if(!a)throw"First parameter is required.";r=r||{type:"video"},r=new n(a,r);var o=this;function h(l){return r.disableLogs||console.log("RecordRTC version: ",o.version),l&&(r=new n(a,l)),r.disableLogs||console.log("started recording "+r.type+" stream."),y?(y.clearRecordedData(),y.record(),L("recording"),o.recordingDuration&&v(),o):(m(function(){o.recordingDuration&&v()}),o)}function m(l){l&&(r.initCallback=function(){l(),l=r.initCallback=null});var A=new i(a,r);y=new A(a,r),y.record(),L("recording"),r.disableLogs||console.log("Initialized recorderType:",y.constructor.name,"for output-type:",r.type)}function p(l){if(l=l||function(){},!y){x();return}if(o.state==="paused"){o.resumeRecording(),setTimeout(function(){p(l)},1);return}o.state!=="recording"&&!r.disableLogs&&console.warn('Recording state should be: "recording", however current state is: ',o.state),r.disableLogs||console.log("Stopped recording "+r.type+" stream."),r.type!=="gif"?y.stop(A):(y.stop(),A()),L("stopped");function A(N){if(!y){typeof l.call=="function"?l.call(o,""):l("");return}Object.keys(y).forEach(function(O){typeof y[O]!="function"&&(o[O]=y[O])});var f=y.blob;if(!f)if(N)y.blob=f=N;else throw"Recording failed.";if(f&&!r.disableLogs&&console.log(f.type,"->",J(f.size)),l){var g;try{g=E.createObjectURL(f)}catch{}typeof l.call=="function"?l.call(o,g):l(g)}r.autoWriteToDisk&&k(function(O){var B={};B[r.type+"Blob"]=O,ce.Store(B)})}}function w(){if(!y){x();return}if(o.state!=="recording"){r.disableLogs||console.warn("Unable to pause the recording. Recording state: ",o.state);return}L("paused"),y.pause(),r.disableLogs||console.log("Paused recording.")}function c(){if(!y){x();return}if(o.state!=="paused"){r.disableLogs||console.warn("Unable to resume the recording. Recording state: ",o.state);return}L("recording"),y.resume(),r.disableLogs||console.log("Resumed recording.")}function T(l){postMessage(new FileReaderSync().readAsDataURL(l))}function k(l,A){if(!l)throw"Pass a callback function over getDataURL.";var N=A?A.blob:(y||{}).blob;if(!N){r.disableLogs||console.warn("Blob encoder did not finish its job yet."),setTimeout(function(){k(l,A)},1e3);return}if(typeof Worker<"u"&&!navigator.mozGetUserMedia){var f=O(T);f.onmessage=function(B){l(B.data)},f.postMessage(N)}else{var g=new FileReader;g.readAsDataURL(N),g.onload=function(B){l(B.target.result)}}function O(B){try{var W=E.createObjectURL(new Blob([B.toString(),"this.onmessage =  function (eee) {"+B.name+"(eee.data);}"],{type:"application/javascript"})),j=new Worker(W);return E.revokeObjectURL(W),j}catch{}}}function v(l){if(l=l||0,o.state==="paused"){setTimeout(function(){v(l)},1e3);return}if(o.state!=="stopped"){if(l>=o.recordingDuration){p(o.onRecordingStopped);return}l+=1e3,setTimeout(function(){v(l)},1e3)}}function L(l){o&&(o.state=l,typeof o.onStateChanged.call=="function"?o.onStateChanged.call(o,l):o.onStateChanged(l))}var C='It seems that recorder is destroyed or "startRecording" is not invoked for '+r.type+" recorder.";function x(){r.disableLogs!==!0&&console.warn(C)}var y,M={startRecording:h,stopRecording:p,pauseRecording:w,resumeRecording:c,initRecorder:m,setRecordingDuration:function(l,A){if(typeof l>"u")throw"recordingDuration is required.";if(typeof l!="number")throw"recordingDuration must be a number.";return o.recordingDuration=l,o.onRecordingStopped=A||function(){},{onRecordingStopped:function(N){o.onRecordingStopped=N}}},clearRecordedData:function(){if(!y){x();return}y.clearRecordedData(),r.disableLogs||console.log("Cleared old recorded data.")},getBlob:function(){if(!y){x();return}return y.blob},getDataURL:k,toURL:function(){if(!y){x();return}return E.createObjectURL(y.blob)},getInternalRecorder:function(){return y},save:function(l){if(!y){x();return}ue(y.blob,l)},getFromDisk:function(l){if(!y){x();return}e.getFromDisk(r.type,l)},setAdvertisementArray:function(l){r.advertisement=[];for(var A=l.length,N=0;N<A;N++)r.advertisement.push({duration:N,image:l[N]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){o.state==="recording"&&!r.disableLogs&&console.warn("Stop an active recorder."),y&&typeof y.clearRecordedData=="function"&&y.clearRecordedData(),y=null,L("inactive"),o.blob=null},onStateChanged:function(l){r.disableLogs||console.log("Recorder state changed:",l)},state:"inactive",getState:function(){return o.state},destroy:function(){var l=r.disableLogs;r={disableLogs:!0},o.reset(),L("destroyed"),M=o=null,Ae.AudioContextConstructor&&(Ae.AudioContextConstructor.close(),Ae.AudioContextConstructor=null),r.disableLogs=l,r.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return o=M,M;for(var I in M)this[I]=M[I];return o=this,M}e.version="5.6.2",t.exports=e,e.getFromDisk=function(a,r){if(!r)throw"callback is mandatory.";console.log("Getting recorded "+(a==="all"?"blobs":a+" blob ")+" from disk!"),ce.Fetch(function(o,h){a!=="all"&&h===a+"Blob"&&r&&r(o),a==="all"&&r&&r(o,h.replace("Blob",""))})},e.writeToDisk=function(a){console.log("Writing recorded blob(s) to disk!"),a=a||{},a.audio&&a.video&&a.gif?a.audio.getDataURL(function(r){a.video.getDataURL(function(o){a.gif.getDataURL(function(h){ce.Store({audioBlob:r,videoBlob:o,gifBlob:h})})})}):a.audio&&a.video?a.audio.getDataURL(function(r){a.video.getDataURL(function(o){ce.Store({audioBlob:r,videoBlob:o})})}):a.audio&&a.gif?a.audio.getDataURL(function(r){a.gif.getDataURL(function(o){ce.Store({audioBlob:r,gifBlob:o})})}):a.video&&a.gif?a.video.getDataURL(function(r){a.gif.getDataURL(function(o){ce.Store({videoBlob:r,gifBlob:o})})}):a.audio?a.audio.getDataURL(function(r){ce.Store({audioBlob:r})}):a.video?a.video.getDataURL(function(r){ce.Store({videoBlob:r})}):a.gif&&a.gif.getDataURL(function(r){ce.Store({gifBlob:r})})};/**
 * {@link RecordRTCConfiguration} is an inner/private helper for {@link RecordRTC}.
 * @summary It configures the 2nd parameter passed over {@link RecordRTC} and returns a valid "config" object.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCConfiguration
 * @class
 * @example
 * var options = RecordRTCConfiguration(mediaStream, options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, getNativeBlob:true, etc.}
 */function n(a,r){return!r.recorderType&&!r.type&&(r.audio&&r.video?r.type="video":r.audio&&!r.video&&(r.type="audio")),r.recorderType&&!r.type&&(r.recorderType===Pe||r.recorderType===Fe||typeof ke<"u"&&r.recorderType===ke?r.type="video":r.recorderType===Ne?r.type="gif":r.recorderType===Me?r.type="audio":r.recorderType===ie&&(V(a,"audio").length&&V(a,"video").length||!V(a,"audio").length&&V(a,"video").length?r.type="video":V(a,"audio").length&&!V(a,"video").length&&(r.type="audio"))),typeof ie<"u"&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(r.mimeType||(r.mimeType="video/webm"),r.type||(r.type=r.mimeType.split("/")[0]),r.bitsPerSecond),r.type||(r.mimeType&&(r.type=r.mimeType.split("/")[0]),r.type||(r.type="audio")),r}/**
 * {@link GetRecorderType} is an inner/private helper for {@link RecordRTC}.
 * @summary It returns best recorder-type available for your browser.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GetRecorderType
 * @class
 * @example
 * var RecorderType = GetRecorderType(options);
 * var recorder = new RecorderType(options);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {type:"video", disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 */function i(a,r){var o;return(D||S||_)&&(o=Me),typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&!D&&(o=ie),r.type==="video"&&(D||_)&&(o=Pe,typeof ke<"u"&&typeof ReadableStream<"u"&&(o=ke)),r.type==="gif"&&(o=Ne),r.type==="canvas"&&(o=Fe),Se()&&o!==Fe&&o!==Ne&&typeof MediaRecorder<"u"&&"requestData"in MediaRecorder.prototype&&(V(a,"video").length||V(a,"audio").length)&&(r.type==="audio"?typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("audio/webm")&&(o=ie):typeof MediaRecorder.isTypeSupported=="function"&&MediaRecorder.isTypeSupported("video/webm")&&(o=ie)),a instanceof Array&&a.length&&(o=Rt),r.recorderType&&(o=r.recorderType),!r.disableLogs&&o&&o.name&&console.log("Using recorderType:",o.name||o.constructor.name),!o&&F&&(o=ie),o}/**
 * MRecordRTC runs on top of {@link RecordRTC} to bring multiple recordings in a single place, by providing simple API.
 * @summary MRecordRTC stands for "Multiple-RecordRTC".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MRecordRTC
 * @class
 * @example
 * var recorder = new MRecordRTC();
 * recorder.addStream(MediaStream);
 * recorder.mediaType = {
 *     audio: true, // or StereoAudioRecorder or MediaStreamRecorder
 *     video: true, // or WhammyRecorder or MediaStreamRecorder or WebAssemblyRecorder or CanvasRecorder
 *     gif: true    // or GifRecorder
 * };
 * // mimeType is optional and should be set only in advance cases.
 * recorder.mimeType = {
 *     audio: 'audio/wav',
 *     video: 'video/webm',
 *     gif:   'image/gif'
 * };
 * recorder.startRecording();
 * @see For further information:
 * @see {@link https://github.com/muaz-khan/RecordRTC/tree/master/MRecordRTC|MRecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @requires {@link RecordRTC}
 */function s(a){this.addStream=function(r){r&&(a=r)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var r=this.mediaType,o,h=this.mimeType||{audio:null,video:null,gif:null};if(typeof r.audio!="function"&&Se()&&!V(a,"audio").length&&(r.audio=!1),typeof r.video!="function"&&Se()&&!V(a,"video").length&&(r.video=!1),typeof r.gif!="function"&&Se()&&!V(a,"video").length&&(r.gif=!1),!r.audio&&!r.video&&!r.gif)throw"MediaStream must have either audio or video tracks.";if(r.audio&&(o=null,typeof r.audio=="function"&&(o=r.audio),this.audioRecorder=new e(a,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:o,mimeType:h.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),r.video||this.audioRecorder.startRecording()),r.video){o=null,typeof r.video=="function"&&(o=r.video);var m=a;if(Se()&&r.audio&&typeof r.audio=="function"){var p=V(a,"video")[0];Z?(m=new q,m.addTrack(p),o&&o===Pe&&(o=ie)):(m=new q,m.addTrack(p))}this.videoRecorder=new e(m,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:o,mimeType:h.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),r.audio||this.videoRecorder.startRecording()}if(r.audio&&r.video){var w=this,c=Se()===!0;(r.audio instanceof Me&&r.video||r.audio!==!0&&r.video!==!0&&r.audio!==r.video)&&(c=!1),c===!0?(w.audioRecorder=null,w.videoRecorder.startRecording()):w.videoRecorder.initRecorder(function(){w.audioRecorder.initRecorder(function(){w.videoRecorder.startRecording(),w.audioRecorder.startRecording()})})}r.gif&&(o=null,typeof r.gif=="function"&&(o=r.gif),this.gifRecorder=new e(a,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:o,mimeType:h.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(r){r=r||function(){},this.audioRecorder&&this.audioRecorder.stopRecording(function(o){r(o,"audio")}),this.videoRecorder&&this.videoRecorder.stopRecording(function(o){r(o,"video")}),this.gifRecorder&&this.gifRecorder.stopRecording(function(o){r(o,"gif")})},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(r){var o={};return this.audioRecorder&&(o.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(o.video=this.videoRecorder.getBlob()),this.gifRecorder&&(o.gif=this.gifRecorder.getBlob()),r&&r(o),o},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(r){this.getBlob(function(m){m.audio&&m.video?o(m.audio,function(p){o(m.video,function(w){r({audio:p,video:w})})}):m.audio?o(m.audio,function(p){r({audio:p})}):m.video&&o(m.video,function(p){r({video:p})})});function o(m,p){if(typeof Worker<"u"){var w=h(function(k){postMessage(new FileReaderSync().readAsDataURL(k))});w.onmessage=function(T){p(T.data)},w.postMessage(m)}else{var c=new FileReader;c.readAsDataURL(m),c.onload=function(T){p(T.target.result)}}}function h(m){var p=E.createObjectURL(new Blob([m.toString(),"this.onmessage =  function (eee) {"+m.name+"(eee.data);}"],{type:"application/javascript"})),w=new Worker(p),c;if(typeof E<"u")c=E;else if(typeof webkitURL<"u")c=webkitURL;else throw"Neither URL nor webkitURL detected.";return c.revokeObjectURL(p),w}},this.writeToDisk=function(){e.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(r){r=r||{audio:!0,video:!0,gif:!0},r.audio&&this.audioRecorder&&this.audioRecorder.save(typeof r.audio=="string"?r.audio:""),r.video&&this.videoRecorder&&this.videoRecorder.save(typeof r.video=="string"?r.video:""),r.gif&&this.gifRecorder&&this.gifRecorder.save(typeof r.gif=="string"?r.gif:"")}}s.getFromDisk=e.getFromDisk,s.writeToDisk=e.writeToDisk,typeof e<"u"&&(e.MRecordRTC=s);var d="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(a){a&&(typeof window<"u"||typeof H>"u"||(H.navigator={userAgent:d,getUserMedia:function(){}},H.console||(H.console={}),(typeof H.console.log>"u"||typeof H.console.error>"u")&&(H.console.error=H.console.log=H.console.log||function(){console.log(arguments)}),typeof document>"u"&&(a.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var r={getContext:function(){return r},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return r},a.HTMLVideoElement=function(){}),typeof location>"u"&&(a.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(a.screen={width:0,height:0}),typeof E>"u"&&(a.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),a.window=H))})(typeof H<"u"?H:null);var u=window.requestAnimationFrame;if(typeof u>"u"){if(typeof webkitRequestAnimationFrame<"u")u=webkitRequestAnimationFrame;else if(typeof mozRequestAnimationFrame<"u")u=mozRequestAnimationFrame;else if(typeof msRequestAnimationFrame<"u")u=msRequestAnimationFrame;else if(typeof u>"u"){var R=0;u=function(a,r){var o=new Date().getTime(),h=Math.max(0,16-(o-R)),m=setTimeout(function(){a(o+h)},h);return R=o+h,m}}}var U=window.cancelAnimationFrame;typeof U>"u"&&(typeof webkitCancelAnimationFrame<"u"?U=webkitCancelAnimationFrame:typeof mozCancelAnimationFrame<"u"?U=mozCancelAnimationFrame:typeof msCancelAnimationFrame<"u"?U=msCancelAnimationFrame:typeof U>"u"&&(U=function(a){clearTimeout(a)}));var P=window.AudioContext;typeof P>"u"&&(typeof webkitAudioContext<"u"&&(P=webkitAudioContext),typeof mozAudioContext<"u"&&(P=mozAudioContext));var E=window.URL;typeof E>"u"&&typeof webkitURL<"u"&&(E=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var S=navigator.userAgent.indexOf("Edge")!==-1&&(!!navigator.msSaveBlob||!!navigator.msSaveOrOpenBlob),_=!!window.opera||navigator.userAgent.indexOf("OPR/")!==-1,Z=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),D=!_&&!S&&!!navigator.webkitGetUserMedia||de()||navigator.userAgent.toLowerCase().indexOf("chrome/")!==-1,F=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);F&&!D&&navigator.userAgent.indexOf("CriOS")!==-1&&(F=!1,D=!0);var q=window.MediaStream;typeof q>"u"&&typeof webkitMediaStream<"u"&&(q=webkitMediaStream),typeof q<"u"&&typeof q.prototype.stop>"u"&&(q.prototype.stop=function(){this.getTracks().forEach(function(a){a.stop()})});function J(a){var r=1e3,o=["Bytes","KB","MB","GB","TB"];if(a===0)return"0 Bytes";var h=parseInt(Math.floor(Math.log(a)/Math.log(r)),10);return(a/Math.pow(r,h)).toPrecision(3)+" "+o[h]}function ue(a,r){if(!a)throw"Blob object is required.";if(!a.type)try{a.type="video/webm"}catch{}var o=(a.type||"video/webm").split("/")[1];if(o.indexOf(";")!==-1&&(o=o.split(";")[0]),r&&r.indexOf(".")!==-1){var h=r.split(".");r=h[0],o=h[1]}var m=(r||Math.round(Math.random()*9999999999)+888888888)+"."+o;if(typeof navigator.msSaveOrOpenBlob<"u")return navigator.msSaveOrOpenBlob(a,m);if(typeof navigator.msSaveBlob<"u")return navigator.msSaveBlob(a,m);var p=document.createElement("a");p.href=E.createObjectURL(a),p.download=m,p.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(p),typeof p.click=="function"?p.click():(p.target="_blank",p.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),E.revokeObjectURL(p.href)}function de(){return!!(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0)}function V(a,r){return!a||!a.getTracks?[]:a.getTracks().filter(function(o){return o.kind===(r||"audio")})}function yt(a,r){"srcObject"in r?r.srcObject=a:"mozSrcObject"in r?r.mozSrcObject=a:r.srcObject=a}function or(a,r){if(typeof EBML>"u")throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var o=new EBML.Reader,h=new EBML.Decoder,m=EBML.tools,p=new FileReader;p.onload=function(w){var c=h.decode(this.result);c.forEach(function(L){o.read(L)}),o.stop();var T=m.makeMetadataSeekable(o.metadatas,o.duration,o.cues),k=this.result.slice(o.metadataSize),v=new Blob([T,k],{type:"video/webm"});r(v)},p.readAsArrayBuffer(a)}typeof e<"u"&&(e.invokeSaveAsDialog=ue,e.getTracks=V,e.getSeekableBlob=or,e.bytesToSize=J,e.isElectron=de);/**
 * Storage is a standalone object used by {@link RecordRTC} to store reusable objects e.g. "new AudioContext".
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * Storage.AudioContext === webkitAudioContext
 * @property {webkitAudioContext} AudioContext - Keeps a reference to AudioContext object.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Ae={};typeof P<"u"?Ae.AudioContext=P:typeof webkitAudioContext<"u"&&(Ae.AudioContext=webkitAudioContext),typeof e<"u"&&(e.Storage=Ae);function Se(){if(Z||F||S)return!0;var a=navigator.userAgent,r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10),h,m;return(D||_)&&(h=a.indexOf("Chrome"),r=a.substring(h+7)),(m=r.indexOf(";"))!==-1&&(r=r.substring(0,m)),(m=r.indexOf(" "))!==-1&&(r=r.substring(0,m)),o=parseInt(""+r,10),isNaN(o)&&(r=""+parseFloat(navigator.appVersion),o=parseInt(navigator.appVersion,10)),o>=49}/**
 * MediaStreamRecorder is an abstraction layer for {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}. It is used by {@link RecordRTC} to record MediaStream(s) in both Chrome and Firefox.
 * @summary Runs top over {@link https://w3c.github.io/mediacapture-record/MediaRecorder.html|MediaRecorder API}.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://github.com/muaz-khan|Muaz Khan}
 * @typedef MediaStreamRecorder
 * @class
 * @example
 * var config = {
 *     mimeType: 'video/webm', // vp8, vp9, h264, mkv, opus/vorbis
 *     audioBitsPerSecond : 256 * 8 * 1024,
 *     videoBitsPerSecond : 256 * 8 * 1024,
 *     bitsPerSecond: 256 * 8 * 1024,  // if this is provided, skip above two
 *     checkForInactiveTracks: true,
 *     timeSlice: 1000, // concatenate intervals based blobs
 *     ondataavailable: function() {} // get intervals based blobs
 * }
 * var recorder = new MediaStreamRecorder(mediaStream, config);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs:true, initCallback: function, mimeType: "video/webm", timeSlice: 1000}
 * @throws Will throw an error if first argument "MediaStream" is missing. Also throws error if "MediaRecorder API" are not supported by the browser.
 */function ie(a,r){var v=this;if(typeof a>"u")throw'First argument "MediaStream" is required.';if(typeof MediaRecorder>"u")throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if(r=r||{mimeType:"video/webm"},r.type==="audio"){if(V(a,"video").length&&V(a,"audio").length){var o;navigator.mozGetUserMedia?(o=new q,o.addTrack(V(a,"audio")[0])):o=new q(V(a,"audio")),a=o}(!r.mimeType||r.mimeType.toString().toLowerCase().indexOf("audio")===-1)&&(r.mimeType=D?"audio/webm":"audio/ogg"),r.mimeType&&r.mimeType.toString().toLowerCase()!=="audio/ogg"&&navigator.mozGetUserMedia&&(r.mimeType="audio/ogg")}var h=[];this.getArrayOfBlobs=function(){return h},this.record=function(){v.blob=null,v.clearRecordedData(),v.timestamps=[],k=[],h=[];var L=r;r.disableLogs||console.log("Passing following config over MediaRecorder API.",L),c&&(c=null),D&&!Se()&&(L="video/vp8"),typeof MediaRecorder.isTypeSupported=="function"&&L.mimeType&&(MediaRecorder.isTypeSupported(L.mimeType)||(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",L.mimeType),L.mimeType=r.type==="audio"?"audio/webm":"video/webm"));try{c=new MediaRecorder(a,L),r.mimeType=L.mimeType}catch{c=new MediaRecorder(a)}L.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in c&&c.canRecordMimeType(L.mimeType)===!1&&(r.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",L.mimeType)),c.ondataavailable=function(C){if(C.data&&k.push("ondataavailable: "+J(C.data.size)),typeof r.timeSlice=="number"){if(C.data&&C.data.size&&(h.push(C.data),m(),typeof r.ondataavailable=="function")){var x=r.getNativeBlob?C.data:new Blob([C.data],{type:p(L)});r.ondataavailable(x)}return}if(!C.data||!C.data.size||C.data.size<100||v.blob){v.recordingCallback&&(v.recordingCallback(new Blob([],{type:p(L)})),v.recordingCallback=null);return}v.blob=r.getNativeBlob?C.data:new Blob([C.data],{type:p(L)}),v.recordingCallback&&(v.recordingCallback(v.blob),v.recordingCallback=null)},c.onstart=function(){k.push("started")},c.onpause=function(){k.push("paused")},c.onresume=function(){k.push("resumed")},c.onstop=function(){k.push("stopped")},c.onerror=function(C){C&&(C.name||(C.name="UnknownError"),k.push("error: "+C),r.disableLogs||(C.name.toString().toLowerCase().indexOf("invalidstate")!==-1?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",C):C.name.toString().toLowerCase().indexOf("notsupported")!==-1?console.error("MIME type (",L.mimeType,") is not supported.",C):C.name.toString().toLowerCase().indexOf("security")!==-1?console.error("MediaRecorder security error",C):C.name==="OutOfMemory"?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="IllegalStreamModification"?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="OtherRecordingError"?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",C):C.name==="GenericError"?console.error("The UA cannot provide the codec or recording option that has been requested.",C):console.error("MediaRecorder Error",C)),function(x){if(!v.manuallyStopped&&c&&c.state==="inactive"){delete r.timeslice,c.start(10*60*1e3);return}setTimeout(x,1e3)}(),c.state!=="inactive"&&c.state!=="stopped"&&c.stop())},typeof r.timeSlice=="number"?(m(),c.start(r.timeSlice)):c.start(36e5),r.initCallback&&r.initCallback()},this.timestamps=[];function m(){v.timestamps.push(new Date().getTime()),typeof r.onTimeStamp=="function"&&r.onTimeStamp(v.timestamps[v.timestamps.length-1],v.timestamps)}function p(L){return c&&c.mimeType?c.mimeType:L.mimeType||"video/webm"}this.stop=function(L){L=L||function(){},v.manuallyStopped=!0,c&&(this.recordingCallback=L,c.state==="recording"&&c.stop(),typeof r.timeSlice=="number"&&setTimeout(function(){v.blob=new Blob(h,{type:p(r)}),v.recordingCallback(v.blob)},100))},this.pause=function(){c&&c.state==="recording"&&c.pause()},this.resume=function(){c&&c.state==="paused"&&c.resume()},this.clearRecordedData=function(){c&&c.state==="recording"&&v.stop(w),w()};function w(){h=[],c=null,v.timestamps=[]}var c;this.getInternalRecorder=function(){return c};function T(){if("active"in a){if(!a.active)return!1}else if("ended"in a&&a.ended)return!1;return!0}this.blob=null,this.getState=function(){return c&&c.state||"inactive"};var k=[];this.getAllStates=function(){return k},typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!1);var v=this;(function L(){if(!(!c||r.checkForInactiveTracks===!1)){if(T()===!1){r.disableLogs||console.log("MediaStream seems stopped."),v.stop();return}setTimeout(L,1e3)}})(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MediaStreamRecorder=ie);/**
 * StereoAudioRecorder is a standalone class used by {@link RecordRTC} to bring "stereo" audio-recording in chrome.
 * @summary JavaScript standalone object for stereo audio recording.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef StereoAudioRecorder
 * @class
 * @example
 * var recorder = new StereoAudioRecorder(MediaStream, {
 *     sampleRate: 44100,
 *     bufferSize: 4096
 * });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {sampleRate: 44100, bufferSize: 4096, numberOfAudioChannels: 1, etc.}
 */function Me(a,r){if(!V(a,"audio").length)throw"Your stream has no audio tracks.";r=r||{};var o=this,h=[],m=[],p=!1,w=0,c,T=2,k=r.desiredSampRate;r.leftChannel===!0&&(T=1),r.numberOfAudioChannels===1&&(T=1),(!T||T<1)&&(T=2),r.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+T),typeof r.checkForInactiveTracks>"u"&&(r.checkForInactiveTracks=!0);function v(){if(r.checkForInactiveTracks===!1)return!0;if("active"in a){if(!a.active)return!1}else if("ended"in a&&a.ended)return!1;return!0}this.record=function(){if(v()===!1)throw"Please make sure MediaStream is active.";N(),g=A=!1,p=!0,typeof r.timeSlice<"u"&&W()};function L(j,ee){function $(X,xe){var fe=X.numberOfAudioChannels,re=X.leftBuffers.slice(0),ve=X.rightBuffers.slice(0),le=X.sampleRate,be=X.internalInterleavedLength,ne=X.desiredSampRate;fe===2&&(re=et(re,be),ve=et(ve,be),ne&&(re=Te(re,ne,le),ve=Te(ve,ne,le))),fe===1&&(re=et(re,be),ne&&(re=Te(re,ne,le))),ne&&(le=ne);function Te(Y,he,oe){var ae=Math.round(Y.length*(he/oe)),te=[],ge=Number((Y.length-1)/(ae-1));te[0]=Y[0];for(var Ce=1;Ce<ae-1;Ce++){var nt=Ce*ge,Tt=Number(Math.floor(nt)).toFixed(),fr=Number(Math.ceil(nt)).toFixed(),lr=nt-Tt;te[Ce]=Ze(Y[Tt],Y[fr],lr)}return te[ae-1]=Y[Y.length-1],te}function Ze(Y,he,oe){return Y+(he-Y)*oe}function et(Y,he){for(var oe=new Float64Array(he),ae=0,te=Y.length,ge=0;ge<te;ge++){var Ce=Y[ge];oe.set(Ce,ae),ae+=Ce.length}return oe}function sr(Y,he){for(var oe=Y.length+he.length,ae=new Float64Array(oe),te=0,ge=0;ge<oe;)ae[ge++]=Y[te],ae[ge++]=he[te],te++;return ae}function Ie(Y,he,oe){for(var ae=oe.length,te=0;te<ae;te++)Y.setUint8(he+te,oe.charCodeAt(te))}var je;fe===2&&(je=sr(re,ve)),fe===1&&(je=re);var ze=je.length,ur=44+ze*2,tt=new ArrayBuffer(ur),Q=new DataView(tt);Ie(Q,0,"RIFF"),Q.setUint32(4,36+ze*2,!0),Ie(Q,8,"WAVE"),Ie(Q,12,"fmt "),Q.setUint32(16,16,!0),Q.setUint16(20,1,!0),Q.setUint16(22,fe,!0),Q.setUint32(24,le,!0),Q.setUint32(28,le*fe*2,!0),Q.setUint16(32,fe*2,!0),Q.setUint16(34,16,!0),Ie(Q,36,"data"),Q.setUint32(40,ze*2,!0);for(var dr=ze,St=44,cr=1,rt=0;rt<dr;rt++)Q.setInt16(St,je[rt]*(32767*cr),!0),St+=2;if(xe)return xe({buffer:tt,view:Q});postMessage({buffer:tt,view:Q})}if(j.noWorker){$(j,function(X){ee(X.buffer,X.view)});return}var ye=C($);ye.onmessage=function(X){ee(X.data.buffer,X.data.view),E.revokeObjectURL(ye.workerURL),ye.terminate()},ye.postMessage(j)}function C(j){var ee=E.createObjectURL(new Blob([j.toString(),";this.onmessage =  function (eee) {"+j.name+"(eee.data);}"],{type:"application/javascript"})),$=new Worker(ee);return $.workerURL=ee,$}this.stop=function(j){j=j||function(){},p=!1,L({desiredSampRate:k,sampleRate:l,numberOfAudioChannels:T,internalInterleavedLength:w,leftBuffers:h,rightBuffers:T===1?[]:m,noWorker:r.noWorker},function(ee,$){o.blob=new Blob([$],{type:"audio/wav"}),o.buffer=new ArrayBuffer($.buffer.byteLength),o.view=$,o.sampleRate=k||l,o.bufferSize=I,o.length=w,g=!1,j&&j(o.blob)})},typeof e.Storage>"u"&&(e.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),(!e.Storage.AudioContextConstructor||e.Storage.AudioContextConstructor.state==="closed")&&(e.Storage.AudioContextConstructor=new e.Storage.AudioContext);var x=e.Storage.AudioContextConstructor,y=x.createMediaStreamSource(a),M=[0,256,512,1024,2048,4096,8192,16384],I=typeof r.bufferSize>"u"?4096:r.bufferSize;if(M.indexOf(I)===-1&&(r.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(M,null,"	"))),x.createJavaScriptNode)c=x.createJavaScriptNode(I,T,T);else if(x.createScriptProcessor)c=x.createScriptProcessor(I,T,T);else throw"WebAudio API has no support on this browser.";y.connect(c),r.bufferSize||(I=c.bufferSize);var l=typeof r.sampleRate<"u"?r.sampleRate:x.sampleRate||44100;(l<22050||l>96e3)&&(r.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),r.disableLogs||r.desiredSampRate&&console.log("Desired sample-rate: "+r.desiredSampRate);var A=!1;this.pause=function(){A=!0},this.resume=function(){if(v()===!1)throw"Please make sure MediaStream is active.";if(!p){r.disableLogs||console.log("Seems recording has been restarted."),this.record();return}A=!1},this.clearRecordedData=function(){r.checkForInactiveTracks=!1,p&&this.stop(f),f()};function N(){h=[],m=[],w=0,g=!1,p=!1,A=!1,x=null,o.leftchannel=h,o.rightchannel=m,o.numberOfAudioChannels=T,o.desiredSampRate=k,o.sampleRate=l,o.recordingLength=w,B={left:[],right:[],recordingLength:0}}function f(){c&&(c.onaudioprocess=null,c.disconnect(),c=null),y&&(y.disconnect(),y=null),N()}this.name="StereoAudioRecorder",this.toString=function(){return this.name};var g=!1;function O(j){if(!A){if(v()===!1&&(r.disableLogs||console.log("MediaStream seems stopped."),c.disconnect(),p=!1),!p){y&&(y.disconnect(),y=null);return}g||(g=!0,r.onAudioProcessStarted&&r.onAudioProcessStarted(),r.initCallback&&r.initCallback());var ee=j.inputBuffer.getChannelData(0),$=new Float32Array(ee);if(h.push($),T===2){var ye=j.inputBuffer.getChannelData(1),X=new Float32Array(ye);m.push(X)}w+=I,o.recordingLength=w,typeof r.timeSlice<"u"&&(B.recordingLength+=I,B.left.push($),T===2&&B.right.push(X))}}c.onaudioprocess=O,x.createMediaStreamDestination?c.connect(x.createMediaStreamDestination()):c.connect(x.destination),this.leftchannel=h,this.rightchannel=m,this.numberOfAudioChannels=T,this.desiredSampRate=k,this.sampleRate=l,o.recordingLength=w;var B={left:[],right:[],recordingLength:0};function W(){!p||typeof r.ondataavailable!="function"||typeof r.timeSlice>"u"||(B.left.length?(L({desiredSampRate:k,sampleRate:l,numberOfAudioChannels:T,internalInterleavedLength:B.recordingLength,leftBuffers:B.left,rightBuffers:T===1?[]:B.right},function(j,ee){var $=new Blob([ee],{type:"audio/wav"});r.ondataavailable($),setTimeout(W,r.timeSlice)}),B={left:[],right:[],recordingLength:0}):setTimeout(W,r.timeSlice))}}typeof e<"u"&&(e.StereoAudioRecorder=Me);/**
 * CanvasRecorder is a standalone class used by {@link RecordRTC} to bring HTML5-Canvas recording into video WebM. It uses HTML2Canvas library and runs top over {@link Whammy}.
 * @summary HTML2Canvas recording into video WebM.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef CanvasRecorder
 * @class
 * @example
 * var recorder = new CanvasRecorder(htmlElement, { disableLogs: true, useWhammyRecorder: true });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {HTMLElement} htmlElement - querySelector/getElementById/getElementsByTagName[0]/etc.
 * @param {object} config - {disableLogs:true, initCallback: function}
 */function Fe(a,r){if(typeof html2canvas>"u")throw"Please link: https://www.webrtc-experiment.com/screenshot.js";r=r||{},r.frameInterval||(r.frameInterval=10);var o=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach(function(M){M in document.createElement("canvas")&&(o=!0)});var h=(!!window.webkitRTCPeerConnection||!!window.webkitGetUserMedia)&&!!window.chrome,m=50,p=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);h&&p&&p[2]&&(m=parseInt(p[2],10)),h&&m<52&&(o=!1),r.useWhammyRecorder&&(o=!1);var w,c;if(o)if(r.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),a instanceof HTMLCanvasElement)w=a;else if(a instanceof CanvasRenderingContext2D)w=a.canvas;else throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";else navigator.mozGetUserMedia&&(r.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));var T;this.record=function(){if(T=!0,o&&!r.useWhammyRecorder){var M;"captureStream"in w?M=w.captureStream(25):"mozCaptureStream"in w?M=w.mozCaptureStream(25):"webkitCaptureStream"in w&&(M=w.webkitCaptureStream(25));try{var I=new q;I.addTrack(V(M,"video")[0]),M=I}catch{}if(!M)throw"captureStream API are NOT available.";c=new ie(M,{mimeType:r.mimeType||"video/webm"}),c.record()}else y.frames=[],x=new Date().getTime(),C();r.initCallback&&r.initCallback()},this.getWebPImages=function(M){if(a.nodeName.toLowerCase()!=="canvas"){M();return}var I=y.frames.length;y.frames.forEach(function(l,A){var N=I-A;r.disableLogs||console.log(N+"/"+I+" frames remaining"),r.onEncodingCallback&&r.onEncodingCallback(N,I);var f=l.image.toDataURL("image/webp",1);y.frames[A].image=f}),r.disableLogs||console.log("Generating WebM"),M()},this.stop=function(M){T=!1;var I=this;if(o&&c){c.stop(M);return}this.getWebPImages(function(){y.compile(function(l){r.disableLogs||console.log("Recording finished!"),I.blob=l,I.blob.forEach&&(I.blob=new Blob([],{type:"video/webm"})),M&&M(I.blob),y.frames=[]})})};var k=!1;this.pause=function(){if(k=!0,c instanceof ie){c.pause();return}},this.resume=function(){if(k=!1,c instanceof ie){c.resume();return}T||this.record()},this.clearRecordedData=function(){T&&this.stop(v),v()};function v(){y.frames=[],T=!1,k=!1}this.name="CanvasRecorder",this.toString=function(){return this.name};function L(){var M=document.createElement("canvas"),I=M.getContext("2d");return M.width=a.width,M.height=a.height,I.drawImage(a,0,0),M}function C(){if(k)return x=new Date().getTime(),setTimeout(C,500);if(a.nodeName.toLowerCase()==="canvas"){var M=new Date().getTime()-x;x=new Date().getTime(),y.frames.push({image:L(),duration:M}),T&&setTimeout(C,r.frameInterval);return}html2canvas(a,{grabMouse:typeof r.showMousePointer>"u"||r.showMousePointer,onrendered:function(I){var l=new Date().getTime()-x;if(!l)return setTimeout(C,r.frameInterval);x=new Date().getTime(),y.frames.push({image:I.toDataURL("image/webp",1),duration:l}),T&&setTimeout(C,r.frameInterval)}})}var x=new Date().getTime(),y=new Qe.Video(100)}typeof e<"u"&&(e.CanvasRecorder=Fe);/**
 * WhammyRecorder is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It runs top over {@link Whammy}.
 * @summary Video recording feature in Chrome.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WhammyRecorder
 * @class
 * @example
 * var recorder = new WhammyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {disableLogs: true, initCallback: function, video: HTMLVideoElement, etc.}
 */function Pe(a,r){r=r||{},r.frameInterval||(r.frameInterval=10),r.disableLogs||console.log("Using frames-interval:",r.frameInterval),this.record=function(){r.width||(r.width=320),r.height||(r.height=240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),T.width=r.canvas.width||320,T.height=r.canvas.height||240,k=T.getContext("2d"),r.video&&r.video instanceof HTMLVideoElement?(v=r.video.cloneNode(),r.initCallback&&r.initCallback()):(v=document.createElement("video"),yt(a,v),v.onloadedmetadata=function(){r.initCallback&&r.initCallback()},v.width=r.video.width,v.height=r.video.height),v.muted=!0,v.play(),L=new Date().getTime(),C=new Qe.Video,r.disableLogs||(console.log("canvas resolutions",T.width,"*",T.height),console.log("video width/height",v.width||T.width,"*",v.height||T.height)),o(r.frameInterval)};function o(x){x=typeof x<"u"?x:10;var y=new Date().getTime()-L;if(!y)return setTimeout(o,x,x);if(w)return L=new Date().getTime(),setTimeout(o,100);L=new Date().getTime(),v.paused&&v.play(),k.drawImage(v,0,0,T.width,T.height),C.frames.push({duration:y,image:T.toDataURL("image/webp")}),p||setTimeout(o,x,x)}function h(x){var y=-1,M=x.length;(function I(){if(y++,y===M){x.callback();return}setTimeout(function(){x.functionToLoop(I,y)},1)})()}function m(x,y,M,I,l){var A=document.createElement("canvas");A.width=T.width,A.height=T.height;var N=A.getContext("2d"),f=[],g=y===-1,O=y&&y>0&&y<=x.length?y:x.length,B={r:0,g:0,b:0},W=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),j=M&&M>=0&&M<=1?M:0,ee=I&&I>=0&&I<=1?I:0,$=!1;h({length:O,functionToLoop:function(ye,X){var xe,fe,re,ve=function(){!$&&re-xe<=re*ee||(g&&($=!0),f.push(x[X])),ye()};if($)ve();else{var le=new Image;le.onload=function(){N.drawImage(le,0,0,T.width,T.height);var be=N.getImageData(0,0,T.width,T.height);xe=0,fe=be.data.length,re=be.data.length/4;for(var ne=0;ne<fe;ne+=4){var Te={r:be.data[ne],g:be.data[ne+1],b:be.data[ne+2]},Ze=Math.sqrt(Math.pow(Te.r-B.r,2)+Math.pow(Te.g-B.g,2)+Math.pow(Te.b-B.b,2));Ze<=W*j&&xe++}ve()},le.src=x[X].image}},callback:function(){f=f.concat(x.slice(O)),f.length<=0&&f.push(x[x.length-1]),l(f)}})}var p=!1;this.stop=function(x){x=x||function(){},p=!0;var y=this;setTimeout(function(){m(C.frames,-1,null,null,function(M){C.frames=M,r.advertisement&&r.advertisement.length&&(C.frames=r.advertisement.concat(C.frames)),C.compile(function(I){y.blob=I,y.blob.forEach&&(y.blob=new Blob([],{type:"video/webm"})),x&&x(y.blob)})})},10)};var w=!1;this.pause=function(){w=!0},this.resume=function(){w=!1,p&&this.record()},this.clearRecordedData=function(){p||this.stop(c),c()};function c(){C.frames=[],p=!0,w=!1}this.name="WhammyRecorder",this.toString=function(){return this.name};var T=document.createElement("canvas"),k=T.getContext("2d"),v,L,C}typeof e<"u"&&(e.WhammyRecorder=Pe);/**
 * Whammy is a standalone class used by {@link RecordRTC} to bring video recording in Chrome. It is written by {@link https://github.com/antimatter15|antimatter15}
 * @summary A real time javascript webm encoder based on a canvas hack.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef Whammy
 * @class
 * @example
 * var recorder = new Whammy().Video(15);
 * recorder.add(context || canvas || dataURL);
 * var output = recorder.compile();
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var Qe=function(){function a(h){this.frames=[],this.duration=h||1,this.quality=.8}a.prototype.add=function(h,m){if("canvas"in h&&(h=h.canvas),"toDataURL"in h&&(h=h.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/ig.test(h))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:h,duration:m||this.duration})};function r(h){var m=E.createObjectURL(new Blob([h.toString(),"this.onmessage =  function (eee) {"+h.name+"(eee.data);}"],{type:"application/javascript"})),p=new Worker(m);return E.revokeObjectURL(m),p}function o(h){function m(l){var A=w(l);if(!A)return[];for(var N=3e4,f=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:M(A.duration),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:A.width,id:176},{data:A.height,id:186}]}]}]}]}],g=0,O=0;g<l.length;){var B=[],W=0;do B.push(l[g]),W+=l[g].duration,g++;while(g<l.length&&W<N);var j=0,ee={id:524531317,data:p(O,j,B)};f[1].data.push(ee),O+=W}return v(f)}function p(l,A,N){return[{data:l,id:231}].concat(N.map(function(f){var g=L({discardable:0,frame:f.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(A)});return A+=f.duration,{data:g,id:163}}))}function w(l){if(!l[0]){postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});return}for(var A=l[0].width,N=l[0].height,f=l[0].duration,g=1;g<l.length;g++)f+=l[g].duration;return{duration:f,width:A,height:N}}function c(l){for(var A=[];l>0;)A.push(l&255),l=l>>8;return new Uint8Array(A.reverse())}function T(l){return new Uint8Array(l.split("").map(function(A){return A.charCodeAt(0)}))}function k(l){var A=[],N=l.length%8?new Array(9-l.length%8).join("0"):"";l=N+l;for(var f=0;f<l.length;f+=8)A.push(parseInt(l.substr(f,8),2));return new Uint8Array(A)}function v(l){for(var A=[],N=0;N<l.length;N++){var f=l[N].data;typeof f=="object"&&(f=v(f)),typeof f=="number"&&(f=k(f.toString(2))),typeof f=="string"&&(f=T(f));var g=f.size||f.byteLength||f.length,O=Math.ceil(Math.ceil(Math.log(g)/Math.log(2))/8),B=g.toString(2),W=new Array(O*7+7+1-B.length).join("0")+B,j=new Array(O).join("0")+"1"+W;A.push(c(l[N].id)),A.push(k(j)),A.push(f)}return new Blob(A,{type:"video/webm"})}function L(l){var A=0;if(l.keyframe&&(A|=128),l.invisible&&(A|=8),l.lacing&&(A|=l.lacing<<1),l.discardable&&(A|=1),l.trackNum>127)throw"TrackNumber > 127 not supported";var N=[l.trackNum|128,l.timecode>>8,l.timecode&255,A].map(function(f){return String.fromCharCode(f)}).join("")+l.frame;return N}function C(l){for(var A=l.RIFF[0].WEBP[0],N=A.indexOf("*"),f=0,g=[];f<4;f++)g[f]=A.charCodeAt(N+3+f);var O,B,W;return W=g[1]<<8|g[0],O=W&16383,W=g[3]<<8|g[2],B=W&16383,{width:O,height:B,data:A,riff:l}}function x(l,A){return parseInt(l.substr(A+4,4).split("").map(function(N){var f=N.charCodeAt(0).toString(2);return new Array(8-f.length+1).join("0")+f}).join(""),2)}function y(l){for(var A=0,N={};A<l.length;){var f=l.substr(A,4),g=x(l,A),O=l.substr(A+4+4,g);A+=4+4+g,N[f]=N[f]||[],f==="RIFF"||f==="LIST"?N[f].push(y(O)):N[f].push(O)}return N}function M(l){return[].slice.call(new Uint8Array(new Float64Array([l]).buffer),0).map(function(A){return String.fromCharCode(A)}).reverse().join("")}var I=new m(h.map(function(l){var A=C(y(atob(l.image.slice(23))));return A.duration=l.duration,A}));postMessage(I)}return a.prototype.compile=function(h){var m=r(o);m.onmessage=function(p){if(p.data.error){console.error(p.data.error);return}h(p.data)},m.postMessage(this.frames)},{Video:a}}();typeof e<"u"&&(e.Whammy=Qe);/**
 * DiskStorage is a standalone object used by {@link RecordRTC} to store recorded blobs in IndexedDB storage.
 * @summary Writing blobs into IndexedDB.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @example
 * DiskStorage.Store({
 *     audioBlob: yourAudioBlob,
 *     videoBlob: yourVideoBlob,
 *     gifBlob  : yourGifBlob
 * });
 * DiskStorage.Fetch(function(dataURL, type) {
 *     if(type === 'audioBlob') { }
 *     if(type === 'videoBlob') { }
 *     if(type === 'gifBlob')   { }
 * });
 * // DiskStorage.dataStoreName = 'recordRTC';
 * // DiskStorage.onError = function(error) { };
 * @property {function} init - This method must be called once to initialize IndexedDB ObjectStore. Though, it is auto-used internally.
 * @property {function} Fetch - This method fetches stored blobs from IndexedDB.
 * @property {function} Store - This method stores blobs in IndexedDB.
 * @property {function} onError - This function is invoked for any known/unknown error.
 * @property {string} dataStoreName - Name of the ObjectStore created in IndexedDB storage.
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 */var ce={init:function(){var a=this;if(typeof indexedDB>"u"||typeof indexedDB.open>"u"){console.error("IndexedDB API are not available in this browser.");return}var r=1,o=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),h,m=indexedDB.open(o,r);function p(c){c.createObjectStore(a.dataStoreName)}function w(){var c=h.transaction([a.dataStoreName],"readwrite");a.videoBlob&&c.objectStore(a.dataStoreName).put(a.videoBlob,"videoBlob"),a.gifBlob&&c.objectStore(a.dataStoreName).put(a.gifBlob,"gifBlob"),a.audioBlob&&c.objectStore(a.dataStoreName).put(a.audioBlob,"audioBlob");function T(k){c.objectStore(a.dataStoreName).get(k).onsuccess=function(v){a.callback&&a.callback(v.target.result,k)}}T("audioBlob"),T("videoBlob"),T("gifBlob")}m.onerror=a.onError,m.onsuccess=function(){if(h=m.result,h.onerror=a.onError,h.setVersion)if(h.version!==r){var c=h.setVersion(r);c.onsuccess=function(){p(h),w()}}else w();else w()},m.onupgradeneeded=function(c){p(c.target.result)}},Fetch:function(a){return this.callback=a,this.init(),this},Store:function(a){return this.audioBlob=a.audioBlob,this.videoBlob=a.videoBlob,this.gifBlob=a.gifBlob,this.init(),this},onError:function(a){console.error(JSON.stringify(a,null,"	"))},dataStoreName:"recordRTC",dbName:null};typeof e<"u"&&(e.DiskStorage=ce);/**
 * GifRecorder is standalone calss used by {@link RecordRTC} to record video or canvas into animated gif.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef GifRecorder
 * @class
 * @example
 * var recorder = new GifRecorder(mediaStream || canvas || context, { onGifPreview: function, onGifRecordingStarted: function, width: 1280, height: 720, frameRate: 200, quality: 10 });
 * recorder.record();
 * recorder.stop(function(blob) {
 *     img.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object or HTMLCanvasElement or CanvasRenderingContext2D.
 * @param {object} config - {disableLogs:true, initCallback: function, width: 320, height: 240, frameRate: 200, quality: 10}
 */function Ne(a,r){if(typeof GIFEncoder>"u"){var o=document.createElement("script");o.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(o)}r=r||{};var h=a instanceof CanvasRenderingContext2D||a instanceof HTMLCanvasElement;this.record=function(){if(typeof GIFEncoder>"u"){setTimeout(x.record,1e3);return}if(!T){setTimeout(x.record,1e3);return}h||(r.width||(r.width=k.offsetWidth||320),r.height||(r.height=k.offsetHeight||240),r.video||(r.video={width:r.width,height:r.height}),r.canvas||(r.canvas={width:r.width,height:r.height}),w.width=r.canvas.width||320,w.height=r.canvas.height||240,k.width=r.video.width||320,k.height=r.video.height||240),C=new GIFEncoder,C.setRepeat(0),C.setDelay(r.frameRate||200),C.setQuality(r.quality||10),C.start(),typeof r.onGifRecordingStarted=="function"&&r.onGifRecordingStarted();function y(M){if(x.clearedRecordedData!==!0){if(m)return setTimeout(function(){y(M)},100);v=u(y),typeof L===void 0&&(L=M),!(M-L<90)&&(!h&&k.paused&&k.play(),h||c.drawImage(k,0,0,w.width,w.height),r.onGifPreview&&r.onGifPreview(w.toDataURL("image/png")),C.addFrame(c),L=M)}}v=u(y),r.initCallback&&r.initCallback()},this.stop=function(y){y=y||function(){},v&&U(v),this.blob=new Blob([new Uint8Array(C.stream().bin)],{type:"image/gif"}),y(this.blob),C.stream().bin=[]};var m=!1;this.pause=function(){m=!0},this.resume=function(){m=!1},this.clearRecordedData=function(){x.clearedRecordedData=!0,p()};function p(){C&&(C.stream().bin=[])}this.name="GifRecorder",this.toString=function(){return this.name};var w=document.createElement("canvas"),c=w.getContext("2d");h&&(a instanceof CanvasRenderingContext2D?(c=a,w=c.canvas):a instanceof HTMLCanvasElement&&(c=a.getContext("2d"),w=a));var T=!0;if(!h){var k=document.createElement("video");k.muted=!0,k.autoplay=!0,k.playsInline=!0,T=!1,k.onloadedmetadata=function(){T=!0},yt(a,k),k.play()}var v=null,L,C,x=this}typeof e<"u"&&(e.GifRecorder=Ne);function vt(a,r){var o="Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45";(function(f){typeof e<"u"||f&&(typeof window<"u"||typeof H>"u"||(H.navigator={userAgent:o,getUserMedia:function(){}},H.console||(H.console={}),(typeof H.console.log>"u"||typeof H.console.error>"u")&&(H.console.error=H.console.log=H.console.log||function(){console.log(arguments)}),typeof document>"u"&&(f.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var g={getContext:function(){return g},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return g},f.HTMLVideoElement=function(){}),typeof location>"u"&&(f.location={protocol:"file:",href:"",hash:""}),typeof screen>"u"&&(f.screen={width:0,height:0}),typeof k>"u"&&(f.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),f.window=H))})(typeof H<"u"?H:null),r=r||"multi-streams-mixer";var h=[],m=!1,p=document.createElement("canvas"),w=p.getContext("2d");p.style.opacity=0,p.style.position="absolute",p.style.zIndex=-1,p.style.top="-1000em",p.style.left="-1000em",p.className=r,(document.body||document.documentElement).appendChild(p),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var c=this,T=window.AudioContext;typeof T>"u"&&(typeof webkitAudioContext<"u"&&(T=webkitAudioContext),typeof mozAudioContext<"u"&&(T=mozAudioContext));var k=window.URL;typeof k>"u"&&typeof webkitURL<"u"&&(k=webkitURL),typeof navigator<"u"&&typeof navigator.getUserMedia>"u"&&(typeof navigator.webkitGetUserMedia<"u"&&(navigator.getUserMedia=navigator.webkitGetUserMedia),typeof navigator.mozGetUserMedia<"u"&&(navigator.getUserMedia=navigator.mozGetUserMedia));var v=window.MediaStream;typeof v>"u"&&typeof webkitMediaStream<"u"&&(v=webkitMediaStream),typeof v<"u"&&typeof v.prototype.stop>"u"&&(v.prototype.stop=function(){this.getTracks().forEach(function(f){f.stop()})});var L={};typeof T<"u"?L.AudioContext=T:typeof webkitAudioContext<"u"&&(L.AudioContext=webkitAudioContext);function C(f,g){"srcObject"in g?g.srcObject=f:"mozSrcObject"in g?g.mozSrcObject=f:g.srcObject=f}this.startDrawingFrames=function(){x()};function x(){if(!m){var f=h.length,g=!1,O=[];if(h.forEach(function(W){W.stream||(W.stream={}),W.stream.fullcanvas?g=W:O.push(W)}),g)p.width=g.stream.width,p.height=g.stream.height;else if(O.length){p.width=f>1?O[0].width*2:O[0].width;var B=1;(f===3||f===4)&&(B=2),(f===5||f===6)&&(B=3),(f===7||f===8)&&(B=4),(f===9||f===10)&&(B=5),p.height=O[0].height*B}else p.width=c.width||360,p.height=c.height||240;g&&g instanceof HTMLVideoElement&&y(g),O.forEach(function(W,j){y(W,j)}),setTimeout(x,c.frameInterval)}}function y(f,g){if(!m){var O=0,B=0,W=f.width,j=f.height;g===1&&(O=f.width),g===2&&(B=f.height),g===3&&(O=f.width,B=f.height),g===4&&(B=f.height*2),g===5&&(O=f.width,B=f.height*2),g===6&&(B=f.height*3),g===7&&(O=f.width,B=f.height*3),typeof f.stream.left<"u"&&(O=f.stream.left),typeof f.stream.top<"u"&&(B=f.stream.top),typeof f.stream.width<"u"&&(W=f.stream.width),typeof f.stream.height<"u"&&(j=f.stream.height),w.drawImage(f,O,B,W,j),typeof f.stream.onRender=="function"&&f.stream.onRender(w,O,B,W,j,g)}}function M(){m=!1;var f=I(),g=l();return g&&g.getTracks().filter(function(O){return O.kind==="audio"}).forEach(function(O){f.addTrack(O)}),a.forEach(function(O){O.fullcanvas}),f}function I(){N();var f;"captureStream"in p?f=p.captureStream():"mozCaptureStream"in p?f=p.mozCaptureStream():c.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var g=new v;return f.getTracks().filter(function(O){return O.kind==="video"}).forEach(function(O){g.addTrack(O)}),p.stream=g,g}function l(){L.AudioContextConstructor||(L.AudioContextConstructor=new L.AudioContext),c.audioContext=L.AudioContextConstructor,c.audioSources=[],c.useGainNode===!0&&(c.gainNode=c.audioContext.createGain(),c.gainNode.connect(c.audioContext.destination),c.gainNode.gain.value=0);var f=0;if(a.forEach(function(g){if(g.getTracks().filter(function(B){return B.kind==="audio"}).length){f++;var O=c.audioContext.createMediaStreamSource(g);c.useGainNode===!0&&O.connect(c.gainNode),c.audioSources.push(O)}}),!!f)return c.audioDestination=c.audioContext.createMediaStreamDestination(),c.audioSources.forEach(function(g){g.connect(c.audioDestination)}),c.audioDestination.stream}function A(f){var g=document.createElement("video");return C(f,g),g.className=r,g.muted=!0,g.volume=0,g.width=f.width||c.width||360,g.height=f.height||c.height||240,g.play(),g}this.appendStreams=function(f){if(!f)throw"First parameter is required.";f instanceof Array||(f=[f]),f.forEach(function(g){var O=new v;if(g.getTracks().filter(function(j){return j.kind==="video"}).length){var B=A(g);B.stream=g,h.push(B),O.addTrack(g.getTracks().filter(function(j){return j.kind==="video"})[0])}if(g.getTracks().filter(function(j){return j.kind==="audio"}).length){var W=c.audioContext.createMediaStreamSource(g);c.audioDestination=c.audioContext.createMediaStreamDestination(),W.connect(c.audioDestination),O.addTrack(c.audioDestination.stream.getTracks().filter(function(j){return j.kind==="audio"})[0])}a.push(O)})},this.releaseStreams=function(){h=[],m=!0,c.gainNode&&(c.gainNode.disconnect(),c.gainNode=null),c.audioSources.length&&(c.audioSources.forEach(function(f){f.disconnect()}),c.audioSources=[]),c.audioDestination&&(c.audioDestination.disconnect(),c.audioDestination=null),c.audioContext&&c.audioContext.close(),c.audioContext=null,w.clearRect(0,0,p.width,p.height),p.stream&&(p.stream.stop(),p.stream=null)},this.resetVideoStreams=function(f){f&&!(f instanceof Array)&&(f=[f]),N(f)};function N(f){h=[],f=f||a,f.forEach(function(g){if(g.getTracks().filter(function(B){return B.kind==="video"}).length){var O=A(g);O.stream=g,h.push(O)}})}this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=M}typeof e>"u"&&(t.exports=vt);/**
 * MultiStreamRecorder can record multiple videos in single container.
 * @summary Multi-videos recorder.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef MultiStreamRecorder
 * @class
 * @example
 * var options = {
 *     mimeType: 'video/webm'
 * }
 * var recorder = new MultiStreamRecorder(ArrayOfMediaStreams, options);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 *
 *     // or
 *     var blob = recorder.blob;
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStreams} mediaStreams - Array of MediaStreams.
 * @param {object} config - {disableLogs:true, frameInterval: 1, mimeType: "video/webm"}
 */function Rt(a,r){a=a||[];var o=this,h,m;r=r||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}},r.frameInterval||(r.frameInterval=10),r.video||(r.video={}),r.video.width||(r.video.width=360),r.video.height||(r.video.height=240),this.record=function(){h=new vt(a,r.elementClass||"multi-streams-mixer"),p().length&&(h.frameInterval=r.frameInterval||10,h.width=r.video.width||360,h.height=r.video.height||240,h.startDrawingFrames()),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()),m=new ie(h.getMixedStream(),r),m.record()};function p(){var w=[];return a.forEach(function(c){V(c,"video").forEach(function(T){w.push(T)})}),w}this.stop=function(w){m&&m.stop(function(c){o.blob=c,w(c),o.clearRecordedData()})},this.pause=function(){m&&m.pause()},this.resume=function(){m&&m.resume()},this.clearRecordedData=function(){m&&(m.clearRecordedData(),m=null),h&&(h.releaseStreams(),h=null)},this.addStreams=function(w){if(!w)throw"First parameter is required.";w instanceof Array||(w=[w]),a.concat(w),!(!m||!h)&&(h.appendStreams(w),r.previewStream&&typeof r.previewStream=="function"&&r.previewStream(h.getMixedStream()))},this.resetVideoStreams=function(w){h&&(w&&!(w instanceof Array)&&(w=[w]),h.resetVideoStreams(w))},this.getMixer=function(){return h},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}typeof e<"u"&&(e.MultiStreamRecorder=Rt);/**
 * RecordRTCPromisesHandler adds promises support in {@link RecordRTC}. Try a {@link https://github.com/muaz-khan/RecordRTC/blob/master/simple-demos/RecordRTCPromisesHandler.html|demo here}
 * @summary Promises for {@link RecordRTC}
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef RecordRTCPromisesHandler
 * @class
 * @example
 * var recorder = new RecordRTCPromisesHandler(mediaStream, options);
 * recorder.startRecording()
 *         .then(successCB)
 *         .catch(errorCB);
 * // Note: You can access all RecordRTC API using "recorder.recordRTC" e.g. 
 * recorder.recordRTC.onStateChanged = function(state) {};
 * recorder.recordRTC.setRecordingDuration(5000);
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - Single media-stream object, array of media-streams, html-canvas-element, etc.
 * @param {object} config - {type:"video", recorderType: MediaStreamRecorder, disableLogs: true, numberOfAudioChannels: 1, bufferSize: 0, sampleRate: 0, video: HTMLVideoElement, etc.}
 * @throws Will throw an error if "new" keyword is not used to initiate "RecordRTCPromisesHandler". Also throws error if first argument "MediaStream" is missing.
 * @requires {@link RecordRTC}
 */function ar(a,r){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(typeof a>"u")throw'First argument "MediaStream" is required.';var o=this;o.recordRTC=new e(a,r),this.startRecording=function(){return new Promise(function(h,m){try{o.recordRTC.startRecording(),h()}catch(p){m(p)}})},this.stopRecording=function(){return new Promise(function(h,m){try{o.recordRTC.stopRecording(function(p){if(o.blob=o.recordRTC.getBlob(),!o.blob||!o.blob.size){m("Empty blob.",o.blob);return}h(p)})}catch(p){m(p)}})},this.pauseRecording=function(){return new Promise(function(h,m){try{o.recordRTC.pauseRecording(),h()}catch(p){m(p)}})},this.resumeRecording=function(){return new Promise(function(h,m){try{o.recordRTC.resumeRecording(),h()}catch(p){m(p)}})},this.getDataURL=function(h){return new Promise(function(m,p){try{o.recordRTC.getDataURL(function(w){m(w)})}catch(w){p(w)}})},this.getBlob=function(){return new Promise(function(h,m){try{h(o.recordRTC.getBlob())}catch(p){m(p)}})},this.getInternalRecorder=function(){return new Promise(function(h,m){try{h(o.recordRTC.getInternalRecorder())}catch(p){m(p)}})},this.reset=function(){return new Promise(function(h,m){try{h(o.recordRTC.reset())}catch(p){m(p)}})},this.destroy=function(){return new Promise(function(h,m){try{h(o.recordRTC.destroy())}catch(p){m(p)}})},this.getState=function(){return new Promise(function(h,m){try{h(o.recordRTC.getState())}catch(p){m(p)}})},this.blob=null,this.version="5.6.2"}typeof e<"u"&&(e.RecordRTCPromisesHandler=ar);/**
 * WebAssemblyRecorder lets you create webm videos in JavaScript via WebAssembly. The library consumes raw RGBA32 buffers (4 bytes per pixel) and turns them into a webm video with the given framerate and quality. This makes it compatible out-of-the-box with ImageData from a CANVAS. With realtime mode you can also use webm-wasm for streaming webm videos.
 * @summary Video recording feature in Chrome, Firefox and maybe Edge.
 * @license {@link https://github.com/muaz-khan/RecordRTC/blob/master/LICENSE|MIT}
 * @author {@link https://MuazKhan.com|Muaz Khan}
 * @typedef WebAssemblyRecorder
 * @class
 * @example
 * var recorder = new WebAssemblyRecorder(mediaStream);
 * recorder.record();
 * recorder.stop(function(blob) {
 *     video.src = URL.createObjectURL(blob);
 * });
 * @see {@link https://github.com/muaz-khan/RecordRTC|RecordRTC Source Code}
 * @param {MediaStream} mediaStream - MediaStream object fetched using getUserMedia API or generated using captureStreamUntilEnded or WebAudio API.
 * @param {object} config - {webAssemblyPath:'webm-wasm.wasm',workerPath: 'webm-worker.js', frameRate: 30, width: 1920, height: 1080, bitrate: 1024, realtime: true}
 */function ke(a,r){(typeof ReadableStream>"u"||typeof WritableStream>"u")&&console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),r=r||{},r.width=r.width||640,r.height=r.height||480,r.frameRate=r.frameRate||30,r.bitrate=r.bitrate||1200,r.realtime=r.realtime||!0;var o;function h(){return new ReadableStream({start:function(k){var v=document.createElement("canvas"),L=document.createElement("video"),C=!0;L.srcObject=a,L.muted=!0,L.height=r.height,L.width=r.width,L.volume=0,L.onplaying=function(){v.width=r.width,v.height=r.height;var x=v.getContext("2d"),y=1e3/r.frameRate,M=setInterval(function(){if(o&&(clearInterval(M),k.close()),C&&(C=!1,r.onVideoProcessStarted&&r.onVideoProcessStarted()),x.drawImage(L,0,0),k._controlledReadableStream.state!=="closed")try{k.enqueue(x.getImageData(0,0,r.width,r.height))}catch{}},y)},L.play()}})}var m;function p(k,v){if(!r.workerPath&&!v){o=!1,fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then(function(C){C.arrayBuffer().then(function(x){p(k,x)})});return}if(!r.workerPath&&v instanceof ArrayBuffer){var L=new Blob([v],{type:"text/javascript"});r.workerPath=E.createObjectURL(L)}r.workerPath||console.error("workerPath parameter is missing."),m=new Worker(r.workerPath),m.postMessage(r.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),m.addEventListener("message",function(C){C.data==="READY"?(m.postMessage({width:r.width,height:r.height,bitrate:r.bitrate||1200,timebaseDen:r.frameRate||30,realtime:r.realtime}),h().pipeTo(new WritableStream({write:function(x){if(o){console.error("Got image, but recorder is finished!");return}m.postMessage(x.data.buffer,[x.data.buffer])}}))):C.data&&(w||T.push(C.data))})}this.record=function(){T=[],w=!1,this.blob=null,p(a),typeof r.initCallback=="function"&&r.initCallback()};var w;this.pause=function(){w=!0},this.resume=function(){w=!1};function c(k){if(!m){k&&k();return}m.addEventListener("message",function(v){v.data===null&&(m.terminate(),m=null,k&&k())}),m.postMessage(null)}var T=[];this.stop=function(k){o=!0;var v=this;c(function(){v.blob=new Blob(T,{type:"video/webm"}),k(v.blob)})},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){T=[],w=!1,this.blob=null},this.blob=null}typeof e<"u"&&(e.WebAssemblyRecorder=ke)})(ir);var Nn=ir.exports;const In="https://api.openai.com/v1/audio/transcriptions",Pt="audio/webm;codecs=opus";class jn{constructor(e){K(this,"openAiKey");K(this,"timeSlice");K(this,"model");K(this,"prompt");K(this,"language");K(this,"chunks",[]);K(this,"onTranscript");K(this,"recorder");K(this,"stream");K(this,"recording",!1);K(this,"transcribing",!1);K(this,"transcript","");K(this,"startRecording",async()=>{var n;this.transcript="",(n=this.onTranscript)==null||n.call(this,""),await this.startStreaming(),this.recorder||(this.recorder=new Nn.RecordRTCPromisesHandler(this.stream,{mimeType:"audio/webm",timeSlice:this.timeSlice,type:"audio",ondataavailable:this.transcribe}));const e=await this.recorder.getState();(e==="inactive"||e==="stopped")&&await this.recorder.startRecording(),e==="paused"&&await this.recorder.resumeRecording(),this.recording=!0});K(this,"stopRecording",async()=>{if(!this.recorder)return"";const e=await this.recorder.getState();return(e==="recording"||e==="paused")&&await this.recorder.stopRecording(),this.recording=!1,this.stopStreaming(),await this.transcribe(),await this.recorder.destroy(),this.chunks=[],this.recorder=void 0,this.transcript});K(this,"startStreaming",async()=>{this.stream&&this.stream.getTracks().forEach(e=>e.stop()),this.stream=await navigator.mediaDevices.getUserMedia({audio:!0})});K(this,"stopStreaming",()=>{this.stream&&(this.stream.getTracks().forEach(e=>e.stop()),this.stream=void 0)});K(this,"transcribe",async e=>{var d;if(!this.recorder)return;this.transcribing=!0,e&&this.chunks.push(e);const n=e?new Blob(this.chunks,{type:Pt}):await this.recorder.getBlob(),i=new File([n],"speech.webm",{type:Pt}),s=await this.sendToWhisper(i);this.transcript=s,this.transcribing=!1,(d=this.onTranscript)==null||d.call(this,s)});K(this,"sendToWhisper",async e=>{const n=new FormData;return n.append("file",e),n.append("model",this.model),n.append("language",this.language),this.prompt&&n.append("prompt",this.prompt),(await Pn.post(In,n,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${this.openAiKey}`}})).data.text});this.openAiKey=e.openAiKey,this.timeSlice=e.timeSlice??2e3,this.model=e.model??"whisper-1",this.prompt=e.prompt??"",this.language=e.language??"en",this.onTranscript=e.onTranscript}}const qn={title:"Basic Usage",route:"basic"};function Hn(){const{apiKey:t}=mr().config,[e,n]=We.useState(!1),[i,s]=We.useState(""),{start:d,stop:u}=We.useMemo(()=>{const U=new jn({openAiKey:t});return U.onTranscript=P=>{s(P)},{start:U.startRecording,stop:U.stopRecording}},[t]),R=We.useCallback(()=>{e?u():d(),n(!e)},[d,u,e]);return qe.jsxs("div",{children:[qe.jsx("h1",{className:Ct.transcription,children:i||"[Transcription will go here]"}),qe.jsx("div",{className:Ct.actions,children:qe.jsx("button",{onClick:R,children:e?"Stop":"Start"})})]})}export{Hn as default,qn as metadata};
